
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/8.0.0-rc.2/decomposition/">
      
      
        <link rel="prev" href="../tests/">
      
      
        <link rel="next" href="../guide/configuration/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Decomposition - Dropwizard-guicey</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","UA-93174150-1"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","UA-93174150-1",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-93174150-1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#decomposition" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Dropwizard-guicey" class="md-header__button md-logo" aria-label="Dropwizard-guicey" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dropwizard-guicey
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Decomposition
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../guide/configuration/" class="md-tabs__link">
          
  
  User guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../installers/resource/" class="md-tabs__link">
          
  
  Installers

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../extras/bom/" class="md-tabs__link">
          
  
  Modules

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../examples/authentication/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../about/release-notes/" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Dropwizard-guicey" class="md-nav__button md-logo" aria-label="Dropwizard-guicey" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Decomposition
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Decomposition
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#guicey-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      Guicey bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      Dropwizard bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bundle-vs-module" class="md-nav__link">
    <span class="md-ellipsis">
      Bundle vs Module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bundle-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Bundle tips
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bundle tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uniqueness" class="md-nav__link">
    <span class="md-ellipsis">
      Uniqueness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-loaded-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      Auto-loaded bundle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auto-loaded bundle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auto-load-override" class="md-nav__link">
    <span class="md-ellipsis">
      Auto load override
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Optional extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace-features" class="md-nav__link">
    <span class="md-ellipsis">
      Replace features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bundle-options" class="md-nav__link">
    <span class="md-ellipsis">
      Bundle options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-access" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qualified-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Qualified properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unique-sub-config" class="md-nav__link">
    <span class="md-ellipsis">
      Unique sub config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-by-path" class="md-nav__link">
    <span class="md-ellipsis">
      Access by path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-configs" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple configs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Custom configuration analysis
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-state" class="md-nav__link">
    <span class="md-ellipsis">
      Shared state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shared state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#equal-communication-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Equal communication scenario
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent-child-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Parent-child scenario
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beforeafter-run-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Before/after run logic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extra integrations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/bundles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/yaml-values/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yaml values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guice
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Guice
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/guice/injector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Injector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/guice/bindings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bindings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/guice/scopes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scopes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/guice/module-autowiring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Module autowiring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/guice/module-analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/guice/override/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Override bindings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/guice/servletmodule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ServletModule
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Diagnostic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Diagnostic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/diagnostic-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/extensions-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extensions help
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/configuration-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/configuration-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/installers-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/yaml-values-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yaml values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/lifecycle-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/guice-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/aop-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AOP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/web-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/diagnostic/jersey-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jersey
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Test
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Test
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/test/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/test/spock2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spock 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/test/junit5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Junit 5
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/test/general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    General support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/test/spock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spock 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/test/junit4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Junit 4
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Classpath scan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/installers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/ordering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ordering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/disables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/deduplication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    De-duplication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/shared/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shared state
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../guide/hk2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HK2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Installers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/resource/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/managed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/healthcheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Health check
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/jersey-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jersey extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/jersey-feature/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jersey feature
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/eager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eager singleton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/servlet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web servlet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web filter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../installers/listener/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web listener
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/bom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/admin-rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Admin REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/lifecycle-annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/eventbus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guava EventBus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/jdbi3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JDBI3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/spa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SPA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/gsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server Pages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../extras/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/governator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Governator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/hibernate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hibernate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/eventbus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EventBus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/jdbi3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JDBI3
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/compatibility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compatibility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version history
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../about/license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#guicey-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      Guicey bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      Dropwizard bundle
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bundle-vs-module" class="md-nav__link">
    <span class="md-ellipsis">
      Bundle vs Module
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bundle-tips" class="md-nav__link">
    <span class="md-ellipsis">
      Bundle tips
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Bundle tips">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#uniqueness" class="md-nav__link">
    <span class="md-ellipsis">
      Uniqueness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-loaded-bundle" class="md-nav__link">
    <span class="md-ellipsis">
      Auto-loaded bundle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Auto-loaded bundle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#auto-load-override" class="md-nav__link">
    <span class="md-ellipsis">
      Auto load override
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#optional-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Optional extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#replace-features" class="md-nav__link">
    <span class="md-ellipsis">
      Replace features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bundle-options" class="md-nav__link">
    <span class="md-ellipsis">
      Bundle options
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-access" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration access
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Configuration access">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#qualified-properties" class="md-nav__link">
    <span class="md-ellipsis">
      Qualified properties
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#unique-sub-config" class="md-nav__link">
    <span class="md-ellipsis">
      Unique sub config
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#access-by-path" class="md-nav__link">
    <span class="md-ellipsis">
      Access by path
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple-configs" class="md-nav__link">
    <span class="md-ellipsis">
      Multiple configs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-analysis" class="md-nav__link">
    <span class="md-ellipsis">
      Custom configuration analysis
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-state" class="md-nav__link">
    <span class="md-ellipsis">
      Shared state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shared state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#equal-communication-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Equal communication scenario
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#parent-child-scenario" class="md-nav__link">
    <span class="md-ellipsis">
      Parent-child scenario
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#beforeafter-run-logic" class="md-nav__link">
    <span class="md-ellipsis">
      Before/after run logic
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="decomposition">Decomposition<a class="headerlink" href="#decomposition" title="Permanent link">&para;</a></h1>
<div class="admonition summary">
<p>Guide for writing re-usable bundles</p>
</div>
<p>In dropwizard there is only one decomposition element: <a href="https://www.dropwizard.io/en/stable/manual/core.html#bundles">ConfiguredBundle</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In pure dropwizard, bundles may also  be used within a single application to separate configuration blocks
(simplify logic). In guicey, this is not required as <a href="../guide/scan/">classpath scan</a> may be
used for extension registration and reduce the amount of required configuration.</p>
<p>This chapter describes only re-usable logic decomposition.</p>
</div>
<p>In guicey there are three decomposition elements - guicey bundles (<code>GuiceyBundle</code>), guice modules (<code>Module</code>) and dropwizard bundle (<code>ConfiguredBundle</code>).
Having three options could be confusing.</p>
<ul>
<li>There are existing <a href="https://modules.dropwizard.io/thirdparty/">dropwizard modules</a> - <code>ConfiguredBundle</code></li>
<li>Existing <a href="https://github.com/google/guice/wiki/3rdPartyModules">guice modules</a> (outdated list, just as an example) - <code>Module</code></li>
<li>And <a href="../guide/modules/">guicey extensions</a> - <code>GuiceyBundle</code></li>
</ul>
<p>All of these modules are supposed to be used together. In some cases, guicey explicitly provides wrapping 
modules (e.g. the <a href="../extras/jdbi3/">jdbi</a> wrapper around the <a href="https://www.dropwizard.io/en/latest/manual/jdbi3.html">dropwizard module</a>).
Such wrappers provide guice related features and enhancements, impossible in vanilla dropwizard modules.</p>
<h2 id="guicey-bundle">Guicey bundle<a class="headerlink" href="#guicey-bundle" title="Permanent link">&para;</a></h2>
<p>As described <a href="../concepts/#bundles">here</a>, guicey introduces its own <a href="../guide/bundles/">bundle</a> because guicey provides
additional configuration features. Even a simple use case may have a need to configure guice modules from a bundle.</p>
<p><em>Prefer <code>GuiceyBundle</code> over dropwizard <code>Bundle</code></em> for developing re-usable modules.
Of course, if module is very generic (does not depend on guice) you can use a pure dropwizard module
(to publish it for wider audience), but almost all bundles rely on guicey features.</p>
<p>Benefits:</p>
<ul>
<li>guice support (ability to register guice modules)</li>
<li><a href="../guide/options/">options</a> support</li>
<li>use <a href="../guide/yaml-values/#unique-sub-configuration">sub-configuration objects</a> directly (important for writing generic modules)</li>
<li>define custom <a href="../guide/extensions/">extension types</a> to simplify usage (e.g. like <a href="../extras/jdbi3/">jdbi</a>)</li>
<li><a href="../concepts/#bundles-lookup">automatic module loading</a> when jar appear in classpath (e.g. like <a href="../extras/lifecycle-annotations/">lifecycle annotations</a>)</li>
<li><a href="../guide/shared/">shared state</a> - advanced techniques for bundle communication (e.g. used by <a href="../extras/gsp/">GSP</a> and <a href="../extras/spa/">SPA</a>)</li>
<li><a href="../guide/events/">events</a> - internal lifecycle events for fine-tuning lifecycle (again, complex cases only, for example, <a href="../extras/gsp/">GSP</a> use it to order bundles logic)</li>
<li>ability to replace functionality (prevent feature x registration by <a href="../guide/disables/">disabling it</a> and register feature y instead)</li>
</ul>
<h2 id="dropwizard-bundle">Dropwizard bundle<a class="headerlink" href="#dropwizard-bundle" title="Permanent link">&para;</a></h2>
<p>It is important to note that there is an important difference between registering a dropwizard bundle directly via the 
dropwizard <code>Bootstrap</code> and registering a bundle through the guicey api - any bundle registered through the guicey api
<a href="../guide/disables/#disable-dropwizard-bundles">may be disabled</a>, <a href="../guide/deduplication/#dropwizard-bundles">de-duplicated</a>, and/or
tracked for <a href="../guide/bundles/#transitive-bundles-tracking">transitive bundles</a>.</p>
<p>All bundles registered through guicey api will also appear in <a href="../guide/diagnostic/configuration-report/">configuration report</a>.</p>
<p>There is a difference between the order that dropwizard and guicey bundles are initialized:</p>
<p><em>Dropwizard bundles</em> <strong>immediately</strong> initialize a transitive bundle.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ConfiguredBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">Bootstrap</span><span class="o">&lt;?&gt;</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">bootstrap</span><span class="p">.</span><span class="na">addBundle</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyOtherBundle</span><span class="p">());</span><span class="w">  </span>

<span class="w">            </span><span class="c1">// line executed after MyOtherBundle init</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><em>Guicey bundle</em> registers a transitive bundle <strong>after</strong> current bundle, but dropwizard bundles are still immediately initialized.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">bootstrap</span>
<span class="w">                </span><span class="p">.</span><span class="na">dropwizardBundles</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DwBundle</span><span class="p">())</span>
<span class="w">                </span><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MyOtherBundle</span><span class="p">());</span>

<span class="w">            </span><span class="c1">// line executed before MyOtherBundle init, but after DwBundle init</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Guicey bundle de-duplication logic is further explained <a href="../guide/deduplication/">here</a>. In short, registered root bundles 
must be initialized in priority. This avoids situations like:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">Bundle1</span><span class="p">(),</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Bundle2</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
</code></pre></div>
<p>If <code>Bundle2</code> is unique and <code>Bundle1</code> transitively installs <code>new Bundle2(1)</code> (e.g. with different config),
then this transitive bundle would be ignored because the root bundle's init will appear first.
If guicey bundles worked like dropwizard bundles, then the directly registered <code>Bundle2</code> would be ignored
and remaining instance would have different configuration, introducing a major point of confusion.  </p>
<p>Normally, this behaviour should not be an issue as you shouldn't rely on bundles initialization order.
But this may be important with <a href="#shared-state">shared state</a>.</p>
<h2 id="bundle-vs-module">Bundle vs Module<a class="headerlink" href="#bundle-vs-module" title="Permanent link">&para;</a></h2>
<p>When extracting functionality into re-usable module always start with a bundle.
A guice module will likely be required as well.</p>
<p>Logic should be separated as:</p>
<ul>
<li><em>Guice module</em> is responsible for guice bindings and should not be aware of dropwizard. </li>
<li><em>Bundle</em> works with dropwizard, extracts required configuration for creating module and do other registrations.</li>
</ul>
<p>That's an ideal case. But, for example, if you need to apply some bindings based on configuration only 
then you can do it with pure guice module, like:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModuleConfig</span><span class="w"> </span><span class="p">{</span><span class="w">  </span>
<span class="w">    </span><span class="nd">@JsonProperty</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">something</span><span class="p">;</span><span class="w"> </span>
<span class="p">}</span>
</code></pre></div>
<p>Module knows that target application (where this re-usable module would be used) will declare
this configuration inside its main configuration:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AppConfig</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Configuration</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@JsonProperty</span><span class="w">    </span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">ModuleConfig</span><span class="w"> </span><span class="n">module</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Make module <a href="../guide/guice/module-autowiring/#autowiring-base-class">aware of dropwizard stuff</a>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModuleImpl</span><span class="o">&lt;</span><span class="n">C</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Configuration</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">DropwizardAwareModule</span><span class="o">&lt;</span><span class="n">C</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>

<span class="w">     </span><span class="nd">@Override</span>
<span class="w">     </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// obtain sub-configuration object </span>
<span class="w">        </span><span class="n">ModuleConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">configuration</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">.</span><span class="na">class</span><span class="p">),</span>
<span class="w">                </span><span class="s">&quot;ModuleConfig is not found within application config. Please declare it.&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// use it for binding    </span>
<span class="w">        </span><span class="n">bind</span><span class="p">(</span><span class="n">SomeService</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">annotatedWith</span><span class="p">(</span><span class="n">Names</span><span class="p">.</span><span class="na">named</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="na">getSomething</span><span class="p">())).</span><span class="na">to</span><span class="p">(</span><span class="n">SomeServiceImpl</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">                            </span>
<span class="w">     </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This is not the recommended way! It was shown just to demonstrate that guice module <em>could</em> be used
without bundle. It's better to use a declarative bundle instead:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModuleImpl</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractBundle</span><span class="w"> </span><span class="p">{</span>

<span class="w">     </span><span class="kd">private</span><span class="w"> </span><span class="n">ModuleConfig</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>

<span class="w">     </span><span class="kd">public</span><span class="w"> </span><span class="nf">ModuleImpl</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="w"> </span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">config</span><span class="p">;</span>
<span class="w">     </span><span class="p">}</span><span class="w">        </span>

<span class="w">     </span><span class="nd">@Override</span>
<span class="w">     </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">                    </span>
<span class="w">        </span><span class="n">bind</span><span class="p">(</span><span class="n">SomeService</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">annotatedWith</span><span class="p">(</span><span class="n">Names</span><span class="p">.</span><span class="na">named</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="na">getSomething</span><span class="p">())).</span><span class="na">to</span><span class="p">(</span><span class="n">SomeServiceImpl</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">                            </span>
<span class="w">     </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ModuleBundle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span><span class="w">   </span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="n">ModuleConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">environment</span><span class="p">.</span><span class="na">configuration</span><span class="p">(</span><span class="n">ModuleConfig</span><span class="p">.</span><span class="na">class</span><span class="p">),</span>
<span class="w">                    </span><span class="s">&quot;ModuleConfig is not found within application config. Please declare it.&quot;</span><span class="p">);</span>

<span class="w">          </span><span class="n">environment</span><span class="p">.</span><span class="na">modules</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ModuleImpl</span><span class="p">(</span><span class="n">config</span><span class="p">));</span><span class="w">          </span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<h2 id="bundle-tips">Bundle tips<a class="headerlink" href="#bundle-tips" title="Permanent link">&para;</a></h2>
<p>These tips show various techniques for developing bundles.<br />
Mostly, these tips are based on developing <a href="../guide/modules/">guicey extensions</a>.
See <a href="https://github.com/xvik/dropwizard-guicey">extensions source</a> for examples.</p>
<h3 id="uniqueness">Uniqueness<a class="headerlink" href="#uniqueness" title="Permanent link">&para;</a></h3>
<p>For everything that is registered "by instance", the <a href="../guide/deduplication/">de-duplication mechanism</a> is applied.</p>
<p>You can use it to provide only one instance of a <a href="../guide/bundles/#bundle-de-duplication">bundle</a> by <code>extends 
UniqueGuiceyBundle</code>. If more sophisticated logic is required, a manual <a href="../guide/deduplication/#equals-method">equals and hash code implementation</a>,
may be used. This could be used to de-duplicate only instances with the same constructor arguments.</p>
<p>This is most applicable to <a href="../guide/deduplication/#guice-modules">guice modules</a> as guice will not start with duplicate bindings
(<code>MyModule extends UniqueModule</code>).</p>
<h3 id="auto-loaded-bundle">Auto-loaded bundle<a class="headerlink" href="#auto-loaded-bundle" title="Permanent link">&para;</a></h3>
<p>Auto-loading is based on the guicey <a href="../guide/bundles/#bundle-lookup">bundles lookup</a> feature.</p>
<p>Be aware that a user may switch off bundle lookup (with <code>.disableBundleLookup()</code>) or apply <a href="../guide/bundles/#customizing-lookup-mechanism">custom lookup</a>).</p>
<h4 id="auto-load-override">Auto load override<a class="headerlink" href="#auto-load-override" title="Permanent link">&para;</a></h4>
<p>If your bundle provides configuration, but you still want to load it automatically with the default configuration,
then you can use <a href="../guide/bundles/#bundle-de-duplication">bundle uniqueness</a>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AutoLoadableBundle</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">UniqueGuiceyBundle</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>If this is used, only one bundle instance is allowed. If a user registers another instance of the bundle manually,
the bundle found from a lookup will simply be ignored. The <a href="../extras/lifecycle-annotations/">lifecycle annotations</a> module uses 
this technique.</p>
<h3 id="optional-extensions">Optional extensions<a class="headerlink" href="#optional-extensions" title="Permanent link">&para;</a></h3>
<p>All extensions must be registered during the initialization phase, when configuration is not yet available
and so it is not possible to implement optional extension registration. </p>
<p>To work around this, you can conditionally disable extensions:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyFeatureBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">   </span>
<span class="w">        </span><span class="c1">// always register extension</span>
<span class="w">        </span><span class="n">bootstrap</span><span class="p">.</span><span class="na">extensions</span><span class="p">(</span><span class="n">OptionalExtension</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w">     </span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>

<span class="w">    </span><span class="nd">@Override</span><span class="w">    </span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// disable extension based on configuration value</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">environment</span><span class="p">.</span><span class="na">configuration</span><span class="p">().</span><span class="na">getSomeValue</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">environment</span><span class="p">.</span><span class="na">disableExtension</span><span class="p">(</span><span class="n">OptionalExtension</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h3 id="replace-features">Replace features<a class="headerlink" href="#replace-features" title="Permanent link">&para;</a></h3>
<p>As bundle has almost complete access to configuration, it can use <a href="../guide/disables/">disables</a>
to substitute application functions.</p>
<p>For example, it is known that an application uses <code>ServiceX</code> from some core module provided by the organization. Your module 
requires a modified service. Your bundle may disable the core module, and install a customized module as a replacement:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyFeatureBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">           </span>
<span class="w">        </span><span class="n">bootstrap</span>
<span class="w">            </span><span class="p">.</span><span class="na">disableModules</span><span class="p">(</span><span class="n">CoreModule</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">modules</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">CustomizedCoreModule</span><span class="p">());</span><span class="w">     </span>
<span class="w">    </span><span class="p">}</span><span class="w">      </span>
<span class="p">}</span><span class="w">      </span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This is not the best pattern to follow. It is simpler to use <a href="../guide/guice/override/">binding override</a>
to override single service. This is an example for demonstration purposes.</p>
<p>Bundles can't disable other bundles (because target bundle could be already processed at this point).   </p>
</div>
<h3 id="bundle-options">Bundle options<a class="headerlink" href="#bundle-options" title="Permanent link">&para;</a></h3>
<p>Bundles can use the guicey <a href="../guide/options/">options mechanism</a> to access guicey option values:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">bootstrap</span><span class="p">.</span><span class="na">option</span><span class="p">(</span><span class="n">GuiceyOptions</span><span class="p">.</span><span class="na">UseHkBridge</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// show warning that bridge required</span>
<span class="w">        </span><span class="p">}</span><span class="w"> </span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>There is also support for <a href="../guide/options/#custom-options">custom options</a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Option values are set only in main <code>GuiceBundle</code>. They are immutable, so all bundles receive the same option values.</p>
</div>
<h3 id="configuration-access">Configuration access<a class="headerlink" href="#configuration-access" title="Permanent link">&para;</a></h3>
<p>A bundle may access direct dropwizard <code>Configuration</code>, as well as individual values thanks to <a href="../guide/yaml-values/">yaml values</a>
introspection.</p>
<h4 id="qualified-properties">Qualified properties<a class="headerlink" href="#qualified-properties" title="Permanent link">&para;</a></h4>
<p>Configuration properties, required for injection, could be simply <a href="../guide/yaml-values/#qualified-bindings">annotated with a
qualifier annotations</a>:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyConfig</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Configuration</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Named</span><span class="p">(</span><span class="s">&quot;custom&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">prop1</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@CustomQualifier</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SubObj</span><span class="w"> </span><span class="n">obj1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SubObj</span><span class="p">();</span>
</code></pre></div>
<p>And used directly in service:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Singleton</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyService</span><span class="w"> </span><span class="p">{</span><span class="w"> </span>

<span class="w">    </span><span class="nd">@Inject</span><span class="w"> </span><span class="nd">@Named</span><span class="p">(</span><span class="s">&quot;custom&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">prop</span><span class="p">;</span><span class="w">   </span>
<span class="w">    </span><span class="nd">@Inject</span><span class="w"> </span><span class="nd">@CustomQualifier</span><span class="w"> </span><span class="n">SubObj</span><span class="w"> </span><span class="n">obj</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>Or accessed in bundle (or guice module):</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">XFeatureBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">SubObj</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">.</span><span class="na">annotatedValue</span><span class="p">(</span><span class="n">CustomQualifier</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="unique-sub-config">Unique sub config<a class="headerlink" href="#unique-sub-config" title="Permanent link">&para;</a></h4>
<p>When creating re-usable bundle it is often required to access yaml configuration data. 
Usually this is solved by some "configuration look-ups" like in <a href="https://www.dropwizard.io/en/release-4.0.x/manual/views.html">dropwizard-views</a> </p>
<p>Guicey allows you to obtain the sub-configuration object directly:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">XFeatureBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">XFeatureConfig</span><span class="w"> </span><span class="n">environment</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">.</span><span class="na">configuration</span><span class="p">(</span><span class="n">XFeatureConfig</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Note that this bundle doesn't know exact type of user configuration, it just 
assumes that <code>XFeatureConfig</code> is declared somewhere in configuration at any level
<strong>just once</strong>. For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyConfig</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Configuration</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@JsonProperty</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">XFeatureConfig</span><span class="w"> </span><span class="n">xfeature</span><span class="p">;</span>

<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Your sub configuration object must appear only once within user configuration.</p>
<p>Object uniqueness checked by exact type match, so if configuration also 
contains some extending class (<code class="highlight"><span class="n">XFeatureConfigExt</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">XFeatureConfig</span></code>) 
it will be different unique config. </p>
</div>
<h4 id="access-by-path">Access by path<a class="headerlink" href="#access-by-path" title="Permanent link">&para;</a></h4>
<p>When you are not sure that configuration is unique, you can rely on exact path definition of required sub configuration:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">XFeatureBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">path</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">XFeatureBundle</span><span class="p">(</span><span class="n">String</span><span class="w"> </span><span class="n">path</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">this</span><span class="p">.</span><span class="na">path</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">path</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">XFeatureConfig</span><span class="w"> </span><span class="n">conf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">environment</span><span class="p">.</span><span class="na">configuration</span><span class="p">(</span><span class="n">path</span><span class="p">);</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>The Path may be declared by the bundle user, who knows required configuration location:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">XFeatureBundle</span><span class="p">(</span><span class="s">&quot;sub.feature&quot;</span><span class="p">))</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="p">.</span><span class="na">build</span><span class="p">()</span>
</code></pre></div>
<p>Where </p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyConfig</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Configuration</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@JsonProperty</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">SubConfig</span><span class="w"> </span><span class="n">sub</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="c1">// pseudo code to combine class declarations</span>
<span class="w">         </span><span class="nd">@JsonProperty</span>
<span class="w">         </span><span class="kd">private</span><span class="w"> </span><span class="n">XFeatureConfig</span><span class="w"> </span><span class="n">feature</span><span class="p">;</span><span class="w">   </span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="multiple-configs">Multiple configs<a class="headerlink" href="#multiple-configs" title="Permanent link">&para;</a></h4>
<p>In case, when multiple config objects could be declared in user configuration,
you can access all of them: </p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">XFeatureBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">XFeatureConfig</span><span class="o">&gt;</span><span class="w"> </span><span class="n">confs</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">environment</span><span class="p">.</span><span class="na">configurations</span><span class="p">(</span><span class="n">XFeatureConfig</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>For configuration</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyConfig</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Configuration</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@JsonProperty</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">XFeatureConfig</span><span class="w"> </span><span class="n">xfeature</span><span class="p">;</span>
<span class="w">    </span><span class="nd">@JsonProperty</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">XFeatureConfig</span><span class="w"> </span><span class="n">xfeature2</span><span class="p">;</span>

<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<p>This <code>configurations</code> method will return both objects: <code>[xfeature, xfeature2]</code></p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>In contrast to unique configurations, this method returns all subclasses as well.
So if there are <code class="highlight"><span class="n">XFeatureConfigExt</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">XFeatureConfig</span></code> declared somewhere it will also be returned.</p>
</div>
<h4 id="custom-configuration-analysis">Custom configuration analysis<a class="headerlink" href="#custom-configuration-analysis" title="Permanent link">&para;</a></h4>
<p>In all other cases (with more complex requirements) you can use <code>ConfigurationTree</code> object which
represents introspected configuration paths.  </p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">XFeatureBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">         </span><span class="c1">// get all properties of custom configuration (ignoring properties from base classes)</span>
<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">ConfigPath</span><span class="o">&gt;</span><span class="w"> </span><span class="n">paths</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">environment</span><span class="p">.</span><span class="na">configurationTree</span><span class="p">()</span>
<span class="w">                </span><span class="p">.</span><span class="na">findAllRootPathsFrom</span><span class="p">(</span><span class="n">MyConfig</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">        </span><span class="c1">// search for not null values of marked (annotated) classes            </span>
<span class="w">        </span><span class="n">List</span><span class="w"> </span><span class="n">markedTypes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">paths</span><span class="p">.</span><span class="na">stream</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">filter</span><span class="p">(</span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="na">getValue</span><span class="p">()</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">null</span><span class="w"> </span>
<span class="w">                    </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="na">getType</span><span class="p">().</span><span class="na">getValueType</span><span class="p">().</span><span class="na">hasAnnotation</span><span class="p">(</span><span class="n">MyMarker</span><span class="p">.</span><span class="na">class</span><span class="p">))</span>
<span class="w">            </span><span class="p">.</span><span class="na">map</span><span class="p">(</span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">it</span><span class="p">.</span><span class="na">getValue</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">collect</span><span class="p">(</span><span class="n">Collectors</span><span class="p">.</span><span class="na">toList</span><span class="p">());</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>In this example, the bundle searches for properties declared directly in the <code>MyConfig</code> configuration
class with non-null values and the custom marker (<code>@MyMarker</code>) class annotation.  </p>
<p>See introspected configuration <a href="../guide/yaml-values/#introspected-configuration">structure description</a> for details.</p>
<h3 id="shared-state">Shared state<a class="headerlink" href="#shared-state" title="Permanent link">&para;</a></h3>
<p>Guicey maintains special shared state object useful for storing application-wide data.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Yes, any shared state is a "hack". Normally, you should avoid using it. 
Guicey provides this ability to unify all such current and future hacks:
so if you need to communicate between bundles - you don't need to reinvent the wheel
and don't have additional problems in tests (due to leaking states).</p>
</div>
<p>For example, it is used by <a href="../extras/spa/">spa bundle</a> to share list of registered
application names between all spa bundle instances and so be able to prevent duplicate name registration.</p>
<p><a href="../extras/gsp/">Server pages bundle</a> use shared state to maintain global configuration
and allow application bundles communication with global views bundle. </p>
<h4 id="equal-communication-scenario">Equal communication scenario<a class="headerlink" href="#equal-communication-scenario" title="Permanent link">&para;</a></h4>
<p>Use the following in cases when multiple (equal) bundles need to communicate, the first initialized
bundle will initialize the shared state and others simply use it:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">EqualBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// either obtain already shared object or share new object                                                             </span>
<span class="w">        </span><span class="n">SomeState</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">.</span><span class="na">sharedState</span><span class="p">(</span><span class="n">EqualBundle</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SomeState</span><span class="p">());</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="parent-child-scenario">Parent-child scenario<a class="headerlink" href="#parent-child-scenario" title="Permanent link">&para;</a></h4>
<p>Use the following in cases when there is one global bundle, which must initialize some global state and child 
bundles, which use or append to this global state:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GlobalBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// share global state object</span>
<span class="w">        </span><span class="n">bootstrap</span><span class="p">.</span><span class="na">shareState</span><span class="p">(</span><span class="n">GlobalBundle</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GlobalState</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span><span class="w">        </span>
<span class="p">}</span><span class="w">    </span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ChildBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// access shared object or fail when not found</span>
<span class="w">        </span><span class="n">GlobalState</span><span class="w"> </span><span class="n">state</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">environment</span><span class="p">.</span><span class="na">sharedStateOrFail</span><span class="p">(</span><span class="n">GlobalBundle</span><span class="p">,</span><span class="w"> </span>
<span class="w">                </span><span class="s">&quot;Failed to obtain global state - check if global bundle registered&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span><span class="w">        </span>
<span class="p">}</span>
</code></pre></div>
<h3 id="beforeafter-run-logic">Before/after run logic<a class="headerlink" href="#beforeafter-run-logic" title="Permanent link">&para;</a></h3>
<p>If multiple bundles must be synchronized on run phase, use <a href="../guide/events/">guicey events</a>. </p>
<p>To run code after all guicey bundles have been initialized, but before run is called:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">bootstrap</span><span class="p">.</span><span class="na">listen</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">GuiceyLifecycleAdapter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">beforeRun</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">BeforeRunEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w">  </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// do something before bundles run</span>
<span class="w">            </span><span class="c1">// NOTE that environment and configuration already available!</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<p>To run code after all guicey bundles run methods have been called (delayed init):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Override</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">environment</span><span class="p">.</span><span class="na">listen</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">GuiceyLifecycleAdapter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">bundlesStarted</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">BundlesStartedEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="c1">// still sdropwizard run phase (anything could be configured)</span>
<span class="w">            </span><span class="c1">// but all guicey bundles aready executed </span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">});</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This will work only for guicey bundles! Registered dropwizard bundles may
execute before or after these events. Events are broadcast from the main dropwizard 
<code>GuiceBundle</code> run method, so other dropwizard bundles, registered after guice bundle
will run after it. 
It is assumed that guicey bundles will be used for most configurations, but especially 
in complex cases when bundle synchronization is required. </p>
</div>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014-2024 Vyacheslav Rusakov
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/xvik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.tabs", "navigation.tracking", "navigation.top"], "search": "../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>