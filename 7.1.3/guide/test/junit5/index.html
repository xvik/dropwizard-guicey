
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/7.1.3/guide/test/junit5/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.1, mkdocs-material-8.5.7">
    
    
      
        <title>Junit 5 - Dropwizard-guicey</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.20d9efc8.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  


  <script id="__analytics">function __md_analytics(){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-93174150-1","auto"),ga("set","anonymizeIp",!0),ga("send","pageview"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){var e;this.value&&(e=document.location.pathname,ga("send","pageview",e+"?q="+this.value))}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");ga("send","event","feedback","click",t,e),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){ga("send","pageview",e.pathname)})});var e=document.createElement("script");e.async=!0,e.src="https://www.google-analytics.com/analytics.js",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>

  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#junit-5" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Dropwizard-guicey" class="md-header__button md-logo" aria-label="Dropwizard-guicey" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dropwizard-guicey
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Junit 5
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../../.." class="md-tabs__link">
      Home
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../getting-started/" class="md-tabs__link">
        Getting started
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../configuration/" class="md-tabs__link md-tabs__link--active">
        User guide
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../installers/resource/" class="md-tabs__link">
        Installers
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../extras/bom/" class="md-tabs__link">
        Modules
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../examples/authentication/" class="md-tabs__link">
        Examples
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../../about/release-notes/" class="md-tabs__link">
        About
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Dropwizard-guicey" class="md-nav__button md-logo" aria-label="Dropwizard-guicey" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Getting started" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Getting started
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../getting-started/" class="md-nav__link">
        Setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../concepts/" class="md-nav__link">
        Concepts overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../guice/" class="md-nav__link">
        Guice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../tests/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../decomposition/" class="md-nav__link">
        Decomposition
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          User guide
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="User guide" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          User guide
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../configuration/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../extensions/" class="md-nav__link">
        Extensions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../web/" class="md-nav__link">
        Web
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../modules/" class="md-nav__link">
        Extra integrations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../bundles/" class="md-nav__link">
        Bundles
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../yaml-values/" class="md-nav__link">
        Yaml values
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_7" type="checkbox" id="__nav_3_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_7">
          Guice
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Guice" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_7">
          <span class="md-nav__icon md-icon"></span>
          Guice
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/injector/" class="md-nav__link">
        Injector
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/bindings/" class="md-nav__link">
        Bindings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/scopes/" class="md-nav__link">
        Scopes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/module-autowiring/" class="md-nav__link">
        Module autowiring
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/module-analysis/" class="md-nav__link">
        Modules analysis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/override/" class="md-nav__link">
        Override bindings
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/servletmodule/" class="md-nav__link">
        ServletModule
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_8" type="checkbox" id="__nav_3_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3_8">
          Diagnostic
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Diagnostic" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_8">
          <span class="md-nav__icon md-icon"></span>
          Diagnostic
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/diagnostic-tools/" class="md-nav__link">
        Tools
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/extensions-report/" class="md-nav__link">
        Extensions help
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/configuration-report/" class="md-nav__link">
        Configuration
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/configuration-model/" class="md-nav__link">
        Configuration model
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/installers-report/" class="md-nav__link">
        Installers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/yaml-values-report/" class="md-nav__link">
        Yaml values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/lifecycle-report/" class="md-nav__link">
        Lifecycle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/guice-report/" class="md-nav__link">
        Guice
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/aop-report/" class="md-nav__link">
        AOP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/web-report/" class="md-nav__link">
        Web
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../diagnostic/jersey-report/" class="md-nav__link">
        Jersey
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3_9" type="checkbox" id="__nav_3_9" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3_9">
          Test
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Test" data-md-level="2">
        <label class="md-nav__title" for="__nav_3_9">
          <span class="md-nav__icon md-icon"></span>
          Test
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../overview/" class="md-nav__link">
        Overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spock2/" class="md-nav__link">
        Spock 2
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Junit 5
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Junit 5
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-extensions-compatibility" class="md-nav__link">
    Dropwizard extensions compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extensions" class="md-nav__link">
    Extensions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-core-logic" class="md-nav__link">
    Testing core logic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-web-logic" class="md-nav__link">
    Testing web logic
  </a>
  
    <nav class="md-nav" aria-label="Testing web logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#random-ports" class="md-nav__link">
    Random ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-mapping" class="md-nav__link">
    Rest mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guice-injections" class="md-nav__link">
    Guice injections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-injection" class="md-nav__link">
    Parameter injection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    Client
  </a>
  
    <nav class="md-nav" aria-label="Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-factory" class="md-nav__link">
    Client factory
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deferred-configuration" class="md-nav__link">
    Deferred configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-from-3rd-party-extensions" class="md-nav__link">
    Configuration from 3rd party extensions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-environment-setup" class="md-nav__link">
    Test environment setup
  </a>
  
    <nav class="md-nav" aria-label="Test environment setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-fields" class="md-nav__link">
    Setup fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-test-modification" class="md-nav__link">
    Application test modification
  </a>
  
    <nav class="md-nav" aria-label="Application test modification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hook-fields" class="md-nav__link">
    Hook fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-configuration-unification" class="md-nav__link">
    Extension configuration unification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reuse-application-between-tests" class="md-nav__link">
    Reuse application between tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parallel-execution" class="md-nav__link">
    Parallel execution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-declaration" class="md-nav__link">
    Alternative declaration
  </a>
  
    <nav class="md-nav" aria-label="Alternative declaration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-application-by-test-method" class="md-nav__link">
    Start application by test method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    Debug
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#junit-nested-classes" class="md-nav__link">
    Junit nested classes
  </a>
  
    <nav class="md-nav" aria-label="Junit nested classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-interfaces-to-share-tests" class="md-nav__link">
    Use interfaces to share tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meta-annotation" class="md-nav__link">
    Meta annotation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-commands" class="md-nav__link">
    Testing commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-startup-error" class="md-nav__link">
    Testing startup error
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    Environment variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3rd-party-extensions-integration" class="md-nav__link">
    3rd party extensions integration
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../general/" class="md-nav__link">
        General support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../spock/" class="md-nav__link">
        Spock 1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../junit4/" class="md-nav__link">
        Junit 4
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../lifecycle/" class="md-nav__link">
        Lifecycle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../scan/" class="md-nav__link">
        Classpath scan
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/" class="md-nav__link">
        Installers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../ordering/" class="md-nav__link">
        Ordering
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../options/" class="md-nav__link">
        Options
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../events/" class="md-nav__link">
        Events
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../disables/" class="md-nav__link">
        Disables
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../deduplication/" class="md-nav__link">
        De-duplication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/" class="md-nav__link">
        Commands
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hooks/" class="md-nav__link">
        Hooks
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../shared/" class="md-nav__link">
        Shared state
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../hk2/" class="md-nav__link">
        HK2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Installers
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Installers" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Installers
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/resource/" class="md-nav__link">
        Resource
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/task/" class="md-nav__link">
        Task
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/managed/" class="md-nav__link">
        Managed
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/lifecycle/" class="md-nav__link">
        Lifecycle
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/healthcheck/" class="md-nav__link">
        Health check
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/jersey-ext/" class="md-nav__link">
        Jersey extension
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/jersey-feature/" class="md-nav__link">
        Jersey feature
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/eager/" class="md-nav__link">
        Eager singleton
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/plugin/" class="md-nav__link">
        Plugin
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/servlet/" class="md-nav__link">
        Web servlet
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/filter/" class="md-nav__link">
        Web filter
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../installers/listener/" class="md-nav__link">
        Web listener
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Modules
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modules" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Modules
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/bom/" class="md-nav__link">
        BOM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/admin-rest/" class="md-nav__link">
        Admin REST
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/lifecycle-annotations/" class="md-nav__link">
        Lifecycle annotations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/eventbus/" class="md-nav__link">
        Guava EventBus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/jdbi3/" class="md-nav__link">
        JDBI3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/spa/" class="md-nav__link">
        SPA
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/gsp/" class="md-nav__link">
        Server Pages
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../extras/validation/" class="md-nav__link">
        Validation
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Examples
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Examples" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Examples
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/authentication/" class="md-nav__link">
        Authentication
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/governator/" class="md-nav__link">
        Governator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/hibernate/" class="md-nav__link">
        Hibernate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/eventbus/" class="md-nav__link">
        EventBus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../examples/jdbi3/" class="md-nav__link">
        JDBI3
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          About
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="About" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          About
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/release-notes/" class="md-nav__link">
        Release notes
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/compatibility/" class="md-nav__link">
        Compatibility
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/migration/" class="md-nav__link">
        Migration guide
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/history/" class="md-nav__link">
        Version history
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/support/" class="md-nav__link">
        Support
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../../about/license/" class="md-nav__link">
        License
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup" class="md-nav__link">
    Setup
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dropwizard-extensions-compatibility" class="md-nav__link">
    Dropwizard extensions compatibility
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extensions" class="md-nav__link">
    Extensions
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-core-logic" class="md-nav__link">
    Testing core logic
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-web-logic" class="md-nav__link">
    Testing web logic
  </a>
  
    <nav class="md-nav" aria-label="Testing web logic">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#random-ports" class="md-nav__link">
    Random ports
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-mapping" class="md-nav__link">
    Rest mapping
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guice-injections" class="md-nav__link">
    Guice injections
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parameter-injection" class="md-nav__link">
    Parameter injection
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#client" class="md-nav__link">
    Client
  </a>
  
    <nav class="md-nav" aria-label="Client">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#client-factory" class="md-nav__link">
    Client factory
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration" class="md-nav__link">
    Configuration
  </a>
  
    <nav class="md-nav" aria-label="Configuration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#deferred-configuration" class="md-nav__link">
    Deferred configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-from-3rd-party-extensions" class="md-nav__link">
    Configuration from 3rd party extensions
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-environment-setup" class="md-nav__link">
    Test environment setup
  </a>
  
    <nav class="md-nav" aria-label="Test environment setup">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#setup-fields" class="md-nav__link">
    Setup fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#application-test-modification" class="md-nav__link">
    Application test modification
  </a>
  
    <nav class="md-nav" aria-label="Application test modification">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#hook-fields" class="md-nav__link">
    Hook fields
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#extension-configuration-unification" class="md-nav__link">
    Extension configuration unification
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#reuse-application-between-tests" class="md-nav__link">
    Reuse application between tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#parallel-execution" class="md-nav__link">
    Parallel execution
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#alternative-declaration" class="md-nav__link">
    Alternative declaration
  </a>
  
    <nav class="md-nav" aria-label="Alternative declaration">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#start-application-by-test-method" class="md-nav__link">
    Start application by test method
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    Debug
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#junit-nested-classes" class="md-nav__link">
    Junit nested classes
  </a>
  
    <nav class="md-nav" aria-label="Junit nested classes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#use-interfaces-to-share-tests" class="md-nav__link">
    Use interfaces to share tests
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#meta-annotation" class="md-nav__link">
    Meta annotation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-commands" class="md-nav__link">
    Testing commands
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#testing-startup-error" class="md-nav__link">
    Testing startup error
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#environment-variables" class="md-nav__link">
    Environment variables
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3rd-party-extensions-integration" class="md-nav__link">
    3rd party extensions integration
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  <a href="https://github.com/xvik/dropwizard-guicey/edit/master/dropwizard-guicey/src/doc/docs/guide/test/junit5.md" title="Edit this page" class="md-content__button md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25Z"/></svg>
  </a>


<h1 id="junit-5">JUnit 5<a class="headerlink" href="#junit-5" title="Permanent link">&para;</a></h1>
<div class="admonition note">
<p><a href="../junit4/#migrating-to-junit-5">Migration from JUnit 4</a></p>
</div>
<p>Junit 5 <a href="https://junit.org/junit5/docs/current/user-guide/">user guide</a></p>
<h2 id="setup">Setup<a class="headerlink" href="#setup" title="Permanent link">&para;</a></h2>
<p>You will need the following dependencies (assuming BOM used for versions management):</p>
<div class="highlight"><pre><span></span><code><span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;io.dropwizard:dropwizard-testing&#39;</span><span class="w"></span>
<span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;org.junit.jupiter:junit-jupiter-api&#39;</span><span class="w"></span>
<span class="n">testRuntimeOnly</span><span class="w"> </span><span class="s1">&#39;org.junit.jupiter:junit-jupiter&#39;</span><span class="w"></span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you already have junit4 or spock tests, you can activate <a href="https://junit.org/junit5/docs/current/user-guide/#migrating-from-junit4">vintage engine</a> 
so all tests could work  <strong>together</strong> with junit 5: 
<div class="highlight"><pre><span></span><code><span class="n">testRuntimeOnly</span><span class="w"> </span><span class="s1">&#39;org.junit.vintage:junit-vintage-engine&#39;</span><span class="w"></span>
</code></pre></div></p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In gradle you need to explicitly <a href="https://docs.gradle.org/current/userguide/java_testing.html#using_junit5">activate junit 5 support</a> with
<div class="highlight"><pre><span></span><code><span class="n">test</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">    </span><span class="n">useJUnitPlatform</span><span class="o">()</span><span class="w"></span>
<span class="w">    </span><span class="o">...</span><span class="w"></span>
<span class="o">}</span><span class="w">                    </span>
</code></pre></div></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Junit 5 annotations are <strong>different</strong> from junit4, so if you have both junit 5 and junit 4
make sure correct classes (annotations) used for junit 5 tests:
<div class="highlight"><pre><span></span><code><span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Assertions</span><span class="p">;</span><span class="w"></span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.jupiter.api.Test</span><span class="p">;</span><span class="w"></span>
</code></pre></div></p>
</div>
<h2 id="dropwizard-extensions-compatibility">Dropwizard extensions compatibility<a class="headerlink" href="#dropwizard-extensions-compatibility" title="Permanent link">&para;</a></h2>
<p>Guicey extensions <em>could be used together with dropwizard extensions</em>. This may be required only in edge cases
when multiple applications startup is required.</p>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// run app (injector only)</span><span class="w"></span>
<span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="c1">// activate dropwizard extensions</span><span class="w"></span>
<span class="nd">@ExtendWith</span><span class="p">(</span><span class="n">DropwizardExtensionsSupport</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientSupportGuiceyTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Use dropwizard extension to start a separate server</span><span class="w"></span>
<span class="w">    </span><span class="c1">// It might be the same application or different </span><span class="w"></span>
<span class="w">    </span><span class="c1">// (application instances would be different in any case)</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">DropwizardAppExtension</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">DropwizardAppExtension</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">testLimitedClient</span><span class="p">(</span><span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">target</span><span class="p">(</span><span class="s">&quot;http://localhost:8080/dummy/&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="na">request</span><span class="p">().</span><span class="na">buildGet</span><span class="p">().</span><span class="na">invoke</span><span class="p">().</span><span class="na">getStatus</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>There is a difference in extensions implementation. </p>
<p>Dropwizard extensions work as:
junit extension <code>@ExtendWith(DropwizardExtensionsSupport.class)</code> looks for fields 
implementing <code>DropwizardExtension</code> (like <code>DropwizardAppExtension</code>) and start/stop them according to test lifecycle.</p>
<p>Guicey extensions implemented as separate junit extensions (and only hook fields are manually searched). 
Also, guciey extensions implement junit parameters injection (for test and lifecycle methods). </p>
</div>
<h2 id="extensions">Extensions<a class="headerlink" href="#extensions" title="Permanent link">&para;</a></h2>
<ul>
<li><code>@TestGuiceyApp</code> - for lightweight tests (without starting web part, only guice context)</li>
<li><code>@TestDropwizardApp</code> - for complete integration tests</li>
</ul>
<div class="admonition note">
<p>For most tests <code>@TestGuiceyApp</code> assumed to be used as it only starts guice injector
(which is much faster than complete application startup). Such tests are ideal for testing 
  business logic (services).</p>
<p><code>@TestDropwizardApp</code> (full integration test) used only to check web endpoints and full workflow
(assuming all business logic was already tested with lightweight tests)</p>
</div>
<p>Both extensions allow using injections directly in test fields.</p>
<p>Extensions could be used under junit <a href="#parallel-execution">parallel execution</a> (no side effects).</p>
<p><a href="#alternative-declaration">Alternative declaration</a> might be used for <a href="#deferred-configuration">deferred configuration</a>
or <a href="#start-application-by-test-method">starting application for each test method</a>. </p>
<p>Pre-configured <a href="#client">http client</a> might be used for calling test application endpoints (or external).</p>
<p>Test environment might be prepared with <a href="#test-environment-setup">setup objects</a>
and application might be re-configured with <a href="#application-test-modification">hooks</a></p>
<h2 id="testing-core-logic">Testing core logic<a class="headerlink" href="#testing-core-logic" title="Permanent link">&para;</a></h2>
<p><code>@TestGuiceyApp</code> runs all guice logic without starting jetty (so resources, servlets and filters will not be available).
<code>Managed</code> objects will still be handled correctly.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">MyApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AutoScanModeTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Inject</span><span class="w"> </span>
<span class="w">    </span><span class="n">MyService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testMyService</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w">        </span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="na">getSmth</span><span class="p">());</span><span class="w">     </span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Also, injections work as method parameters:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">MyApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AutoScanModeTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testMyService</span><span class="p">(</span><span class="n">MyService</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w">        </span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;hello&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="na">getSmth</span><span class="p">());</span><span class="w">     </span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Application started before all tests in annotated class and stopped after them.</p>
<h2 id="testing-web-logic">Testing web logic<a class="headerlink" href="#testing-web-logic" title="Permanent link">&para;</a></h2>
<p><code>@TestDropwizardApp</code> is useful for complete integration testing (when web part is required):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="o">(</span><span class="n">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="w"></span>
<span class="kd">class</span><span class="w"> </span><span class="nc">WebModuleTest</span><span class="w"> </span><span class="o">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Inject</span><span class="w"> </span>
<span class="w">    </span><span class="n">MyService</span><span class="w"> </span><span class="n">service</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">checkWebBindings</span><span class="o">(</span><span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"></span>

<span class="w">        </span><span class="n">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="s2">&quot;Sample filter and service called&quot;</span><span class="o">,</span><span class="w"> </span>
<span class="w">            </span><span class="n">client</span><span class="o">.</span><span class="na">targetMain</span><span class="o">(</span><span class="s2">&quot;servlet&quot;</span><span class="o">).</span><span class="na">request</span><span class="o">().</span><span class="na">buildGet</span><span class="o">().</span><span class="na">invoke</span><span class="o">().</span><span class="na">readEntity</span><span class="o">(</span><span class="n">String</span><span class="o">.</span><span class="na">class</span><span class="o">));</span><span class="w"></span>

<span class="w">        </span><span class="n">Assertions</span><span class="o">.</span><span class="na">assertTrur</span><span class="o">(</span><span class="n">service</span><span class="o">.</span><span class="na">isCalled</span><span class="o">());</span><span class="w"></span>
</code></pre></div>
<h3 id="random-ports">Random ports<a class="headerlink" href="#random-ports" title="Permanent link">&para;</a></h3>
<p>In order to start application on random port you can use configuration shortcut:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="o">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="w"> </span><span class="n">randomPorts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Random ports setting override exact ports in configuration:
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="o">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="o">,</span><span class="w"> </span>
<span class="w">                  </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;path/to/my/config.yml&#39;</span><span class="o">,</span><span class="w"> </span>
<span class="w">                  </span><span class="n">randomPorts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span><span class="w"></span>
</code></pre></div>
Also, random ports support both server types (default and simple)</p>
</div>
<p>Real ports could be resolved with <a href="#client">ClientSupport</a> object.</p>
<h3 id="rest-mapping">Rest mapping<a class="headerlink" href="#rest-mapping" title="Permanent link">&para;</a></h3>
<p>Normally, rest mapping configured with <code>server.rootMapping=/something/*</code> configuration, but
if you don't use custom configuration class, but still want to re-map rest, shortcut could be used:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="o">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="o">.</span><span class="na">class</span><span class="o">,</span><span class="w"> </span><span class="n">restMapping</span><span class="o">=</span><span class="s2">&quot;something&quot;</span><span class="o">)</span><span class="w"></span>
</code></pre></div>
<p>In contrast to config declaration, attribute value may not start with '/' and end with '/*' -
it would be appended automatically. </p>
<p>This option is only intended to simplify cases when custom configuration file is not yet used in tests
(usually early PoC phase). It allows you to map servlet into application root in test (because rest is no
more resides in root). When used with existing configuration file, this parameter will override file definition.</p>
<h2 id="guice-injections">Guice injections<a class="headerlink" href="#guice-injections" title="Permanent link">&para;</a></h2>
<p>Any guice bean could be injected directly into the test field:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Inject</span><span class="w"></span>
<span class="n">SomeBean</span><span class="w"> </span><span class="n">bean</span><span class="w"></span>
</code></pre></div>
<p>This will work even for not declared (in guice modules) beans (JIT injection will occur).</p>
<p>To better understand injection scopes look the following test:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// one application instance started for all test methods</span><span class="w"></span>
<span class="nd">@TestGuiceyApp</span><span class="o">(</span><span class="n">AutoScanApplication</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="w"></span>
<span class="nd">@TestMethodOrder</span><span class="o">(</span><span class="n">MethodOrderer</span><span class="o">.</span><span class="na">OrderAnnotation</span><span class="o">.</span><span class="na">class</span><span class="o">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">InjectionScopeTest</span><span class="w"> </span><span class="o">{</span><span class="w"></span>

<span class="w">    </span><span class="c1">// new instance injected on each test</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">    </span><span class="n">TestBean</span><span class="w"> </span><span class="n">bean</span><span class="o">;</span><span class="w"></span>

<span class="w">    </span><span class="c1">// the same context used for all tests (in class), so the same bean instance inserted before each test</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">    </span><span class="n">TestSingletonBean</span><span class="w"> </span><span class="n">singletonBean</span><span class="o">;</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Order</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">testInjection</span><span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="n">bean</span><span class="o">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="o">;</span><span class="w"></span>
<span class="w">        </span><span class="n">singletonBean</span><span class="o">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">15</span><span class="o">;</span><span class="w"></span>

<span class="w">        </span><span class="n">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="n">bean</span><span class="o">.</span><span class="na">value</span><span class="o">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">15</span><span class="o">,</span><span class="w"> </span><span class="n">singletonBean</span><span class="o">.</span><span class="na">value</span><span class="o">);</span><span class="w"></span>

<span class="w">    </span><span class="o">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Order</span><span class="o">(</span><span class="mi">2</span><span class="o">)</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">testSharedState</span><span class="o">()</span><span class="w"> </span><span class="o">{</span><span class="w"></span>

<span class="w">        </span><span class="n">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="n">bean</span><span class="o">.</span><span class="na">value</span><span class="o">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Assertions</span><span class="o">.</span><span class="na">assertEquals</span><span class="o">(</span><span class="mi">15</span><span class="o">,</span><span class="w"> </span><span class="n">singletonBean</span><span class="o">.</span><span class="na">value</span><span class="o">);</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>

<span class="w">    </span><span class="c1">// bean is in prototype scope</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">TestBean</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="o">;</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Singleton</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span><span class="w"> </span><span class="nc">TestSingletonBean</span><span class="w"> </span><span class="o">{</span><span class="w"></span>
<span class="w">        </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="o">;</span><span class="w"></span>
<span class="w">    </span><span class="o">}</span><span class="w"></span>
<span class="o">}</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Guice AOP <em>will not work</em> on test methods (because test instances are not created by guice).</p>
</div>
<h2 id="parameter-injection">Parameter injection<a class="headerlink" href="#parameter-injection" title="Permanent link">&para;</a></h2>
<p>Any <strong>declared</strong> guice bean may be injected as test method parameter:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testSomthing</span><span class="p">(</span><span class="n">DummyBean</span><span class="w"> </span><span class="n">bean</span><span class="p">)</span><span class="w"> </span>
</code></pre></div>
<p>(where <code>DummyBean</code> is manually declared in some module or requested as a dependency 
(JIT-instantiated) during injector creation).</p>
<p>For unknown beans injection (not declared and not used during startup) special annotation must be used:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testSomthing</span><span class="p">(</span><span class="nd">@Jit</span><span class="w"> </span><span class="n">TestBean</span><span class="w"> </span><span class="n">bean</span><span class="p">)</span><span class="w"> </span>
</code></pre></div>
<div class="admonition info">
<p class="admonition-title">Info</p>
<p>Additional annotation required because you may use other junit extensions providing their own
parameters, which guicey extension should not try to handle. That's why not annotated parameters
verified with existing injector bindings.</p>
</div>
<p>Qualified and generified injections will also work:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testSomthing</span><span class="p">(</span><span class="nd">@Named</span><span class="p">(</span><span class="s">&quot;qual&quot;</span><span class="p">)</span><span class="w"> </span><span class="n">SomeBean</span><span class="w"> </span><span class="n">bean</span><span class="p">,</span><span class="w"></span>
<span class="w">                         </span><span class="n">TestBean</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">generifiedBean</span><span class="p">,</span><span class="w"></span>
<span class="w">                         </span><span class="n">Provider</span><span class="o">&lt;</span><span class="n">OtherBean</span><span class="o">&gt;</span><span class="w"> </span><span class="n">provider</span><span class="p">)</span><span class="w"> </span>
</code></pre></div>
<p>Also, there are special objects available as parameters:</p>
<ul>
<li><code>Application</code> or exact application class (<code>MyApplication</code>)</li>
<li><code>ObjectMapper</code></li>
<li><code>ClientSupport</code> application web client helper</li>
<li><code>DropwizardTestSupport</code> test support object used internally</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Parameter injection will work on test methods as well as lifecyle methods (beforeAll, afterEach etc.) </p>
</div>
<p>Example:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ParametersInjectionDwTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">ParametersInjectionDwTest</span><span class="p">(</span><span class="n">Environment</span><span class="w"> </span><span class="n">env</span><span class="p">,</span><span class="w"> </span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">env</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">service</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@BeforeAll</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">before</span><span class="p">(</span><span class="n">Application</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">app</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">service</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@BeforeEach</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="n">Application</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">app</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">service</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@AfterEach</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">tearDown</span><span class="p">(</span><span class="n">Application</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">app</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">service</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@AfterAll</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">after</span><span class="p">(</span><span class="n">Application</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"> </span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">app</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">Preconditions</span><span class="p">.</span><span class="na">checkNotNull</span><span class="p">(</span><span class="n">service</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkAllPossibleParams</span><span class="p">(</span><span class="n">Application</span><span class="w"> </span><span class="n">app</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">AutoScanApplication</span><span class="w"> </span><span class="n">app2</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">Configuration</span><span class="w"> </span><span class="n">conf</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">TestConfiguration</span><span class="w"> </span><span class="n">conf2</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">Environment</span><span class="w"> </span><span class="n">env</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">ObjectMapper</span><span class="w"> </span><span class="n">mapper</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">Injector</span><span class="w"> </span><span class="n">injector</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">DropwizardTestSupport</span><span class="w"> </span><span class="n">support</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">,</span><span class="w"></span>
<span class="w">                                </span><span class="nd">@Jit</span><span class="w"> </span><span class="n">JitService</span><span class="w"> </span><span class="n">jit</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">app</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">app2</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">conf</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">conf2</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">env</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">mapper</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">injector</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">client</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">support</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">service</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertNotNull</span><span class="p">(</span><span class="n">jit</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="na">getPort</span><span class="p">(),</span><span class="w"> </span><span class="mi">8080</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">assertEquals</span><span class="p">(</span><span class="n">client</span><span class="p">.</span><span class="na">getAdminPort</span><span class="p">(),</span><span class="w"> </span><span class="mi">8081</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">JitService</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="kd">private</span><span class="w"> </span><span class="kd">final</span><span class="w"> </span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">        </span><span class="kd">public</span><span class="w"> </span><span class="nf">JitService</span><span class="p">(</span><span class="n">DummyService</span><span class="w"> </span><span class="n">service</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="k">this</span><span class="p">.</span><span class="na">service</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">service</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p><code>DropwizardTestSupport</code> and <code>ClientSupport</code> objects are also available with a static calls (in the same thread):</p>
<div class="highlight"><pre><span></span><code><span class="n">DropwizardTestSupport</span><span class="w"> </span><span class="n">support</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestSupport</span><span class="p">.</span><span class="na">getContext</span><span class="p">();</span><span class="w"></span>
<span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestSupport</span><span class="p">.</span><span class="na">getContextClient</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
</div>
<h2 id="client">Client<a class="headerlink" href="#client" title="Permanent link">&para;</a></h2>
<p>Both extensions prepare special jersey client instance which could be used for web calls.
It is mostly useful for complete web tests to call rest services and servlets.</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kt">void</span><span class="w"> </span><span class="nf">checkRandomPorts</span><span class="p">(</span><span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="mi">8080</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">getPort</span><span class="p">());</span><span class="w"></span>
<span class="w">    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotEquals</span><span class="p">(</span><span class="mi">8081</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">getAdminPort</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Client object provides:</p>
<ul>
<li>Access to <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/2.29.1/client.html">JerseyClient</a> object (for raw calls)</li>
<li>Shortcuts for querying main, admin or rest contexts (it will count the current configuration automatically)</li>
<li>Shortcuts for base main, admin or rest contexts base urls (and application ports)</li>
</ul>
<p>Example usages:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// GET {rest path}/some</span><span class="w"></span>
<span class="n">client</span><span class="p">.</span><span class="na">targetRest</span><span class="p">(</span><span class="s">&quot;some&quot;</span><span class="p">).</span><span class="na">request</span><span class="p">().</span><span class="na">buildGet</span><span class="p">().</span><span class="na">invoke</span><span class="p">()</span><span class="w"></span>

<span class="c1">// GET {main context path}/servlet</span><span class="w"></span>
<span class="n">client</span><span class="p">.</span><span class="na">targetMain</span><span class="p">(</span><span class="s">&quot;servlet&quot;</span><span class="p">).</span><span class="na">request</span><span class="p">().</span><span class="na">buildGet</span><span class="p">().</span><span class="na">invoke</span><span class="p">()</span><span class="w"></span>

<span class="c1">// GET {admin context path}/adminServlet</span><span class="w"></span>
<span class="n">client</span><span class="p">.</span><span class="na">targetAdmin</span><span class="p">(</span><span class="s">&quot;adminServlet&quot;</span><span class="p">).</span><span class="na">request</span><span class="p">().</span><span class="na">buildGet</span><span class="p">().</span><span class="na">invoke</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>All methods above accepts any number of strings which would be automatically combined into correct path:
<div class="highlight"><pre><span></span><code><span class="n">client</span><span class="o">.</span><span class="na">targetRest</span><span class="o">(</span><span class="s2">&quot;some&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;other/&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;/part&quot;</span><span class="o">)</span><span class="w"></span>
</code></pre></div>
would be correctly combined as "/some/other/part/"</p>
</div>
<p>As you can see test code is abstracted from actual configuration: it may be default or simple server
with any contexts mapping on any ports - target urls will always be correct.</p>
<div class="highlight"><pre><span></span><code><span class="n">Response</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">targetRest</span><span class="p">(</span><span class="s">&quot;some&quot;</span><span class="p">).</span><span class="na">request</span><span class="p">().</span><span class="na">buildGet</span><span class="p">().</span><span class="na">invoke</span><span class="p">()</span><span class="w"></span>

<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">.</span><span class="na">getStatus</span><span class="p">())</span><span class="w"></span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;response text&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">.</span><span class="na">readEntity</span><span class="p">(</span><span class="n">String</span><span class="p">))</span><span class="w"> </span>
</code></pre></div>
<p>Also, if you want to use other client, client object can simply provide required info:</p>
<div class="highlight"><pre><span></span><code><span class="n">client</span><span class="o">.</span><span class="na">getPort</span><span class="o">()</span><span class="w">        </span><span class="c1">// app port (8080)</span><span class="w"></span>
<span class="n">client</span><span class="o">.</span><span class="na">getAdminPort</span><span class="o">()</span><span class="w">   </span><span class="c1">// app admin port (8081)</span><span class="w"></span>
<span class="n">client</span><span class="o">.</span><span class="na">basePathMain</span><span class="o">()</span><span class="w">   </span><span class="c1">// main context path (http://localhost:8080/)</span><span class="w"></span>
<span class="n">client</span><span class="o">.</span><span class="na">basePathAdmin</span><span class="o">()</span><span class="w">  </span><span class="c1">// admin context path (http://localhost:8081/)</span><span class="w"></span>
<span class="n">client</span><span class="o">.</span><span class="na">basePathRest</span><span class="o">()</span><span class="w">   </span><span class="c1">// rest context path (http://localhost:8080/)</span><span class="w"></span>
</code></pre></div>
<p>Raw client usage:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// call completely external url</span><span class="w"></span>
<span class="n">client</span><span class="p">.</span><span class="na">target</span><span class="p">(</span><span class="s">&quot;http://somedomain:8080/dummy/&quot;</span><span class="p">).</span><span class="na">request</span><span class="p">().</span><span class="na">buildGet</span><span class="p">().</span><span class="na">invoke</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Client object could be injected with both dropwizard and guicey extensions, but in case of guicey extension,
only raw client could be used (because web part not started all other methods will throw NPE)</p>
</div>
<h3 id="client-factory">Client factory<a class="headerlink" href="#client-factory" title="Permanent link">&para;</a></h3>
<p>Internal <code>JerseyClient</code> creation could be customized with <code>TestClientFactory</code> implementation.</p>
<p>Default implementation (<code>DefaultTestClientFactory</code>) applies timeouts and auto-registers multipart support if <code>dropwizard-forms</code> module
is available in classpath.</p>
<p>Custom implementation could be specified directly in the test annotation:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApp</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">clientFactory</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CustomTestClientFactory</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<h2 id="configuration">Configuration<a class="headerlink" href="#configuration" title="Permanent link">&para;</a></h2>
<p>For both extensions you can configure application with external configuration file:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;path/to/my/config.yml&quot;</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConfigOverrideTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>Or just declare required values:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">configOverride</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;foo: 2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;bar: 12&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConfigOverrideTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<p>(note that overriding declaration follows yaml format "key: value")</p>
<p>Or use both at once (here overrides will override file values):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="err">&#39;</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">my</span><span class="o">/</span><span class="n">config</span><span class="p">.</span><span class="na">yml</span><span class="err">&#39;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">configOverride</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;foo: 2&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;bar: 12&quot;</span><span class="w"></span>
<span class="w">    </span><span class="p">})</span><span class="w"></span>
<span class="kd">class</span> <span class="nc">ConfigOverrideTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
</code></pre></div>
<h3 id="deferred-configuration">Deferred configuration<a class="headerlink" href="#deferred-configuration" title="Permanent link">&para;</a></h3>
<p>If you need to configure value, supplied by some other extension, or value may be resolved only
after test start, then static overrides declaration is not an option. In this case use
<a href="#alternative-declaration">alternative extensions declaration</a> which provides additional 
config override methods:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="nd">@Order</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">FooExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FooExtension</span><span class="p">();</span><span class="w"></span>

<span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="nd">@Order</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">config</span><span class="p">(</span><span class="s">&quot;src/test/resources/ru/vyarus/dropwizard/guice/config.yml&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">configOverrides</span><span class="p">(</span><span class="s">&quot;foo: 1&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;bar&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ext</span><span class="p">.</span><span class="na">getValue</span><span class="p">())</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">configOverrides</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ConfigOverrideValue</span><span class="p">(</span><span class="s">&quot;baa&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;44&quot;</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">create</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<p>In most cases <code>configOverride("bar", () -&gt; ext.getValue())</code> would be enough to configure a supplier instead
of static value.</p>
<p>In more complex cases, you can use custom implementations of <code>ConfigOverride</code>. </p>
<div class="admonition warning">
<p>Guicey have to accept only <code>ConfigOverride</code> objects implementing custom 
<code>ru.vyarus.dropwizard.guice.test.util.ConfigurablePrefix</code> interface. 
In order to support parallel tests guicey generates unique config prefix for each test
(because all overrides eventually stored to system properties) and so it needs a way
to set this prefix into custom <code>ConfigOverride</code> objects.</p>
</div>
<h3 id="configuration-from-3rd-party-extensions">Configuration from 3<sup>rd</sup> party extensions<a class="headerlink" href="#configuration-from-3rd-party-extensions" title="Permanent link">&para;</a></h3>
<p>If you have junit extension (e.g. which starts db for test) and you need 
to apply configuration overrides from that extension, then you should simply
store required values inside junit storage:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ConfigExtension</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BeforeAllCallback</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">beforeAll</span><span class="p">(</span><span class="n">ExtensionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// do something and then store value</span><span class="w"></span>
<span class="w">        </span><span class="n">context</span><span class="p">.</span><span class="na">getStore</span><span class="p">(</span><span class="n">ExtensionContext</span><span class="p">.</span><span class="na">Namespace</span><span class="p">.</span><span class="na">GLOBAL</span><span class="p">).</span><span class="na">put</span><span class="p">(</span><span class="s">&quot;ext1&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>And map overrides directly from store using <code>configOverrideByExtension</code> method:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@ExtendWith</span><span class="p">(</span><span class="n">ConfigExtension</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SampleTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">configOverrideByExtension</span><span class="p">(</span><span class="n">ExtensionContext</span><span class="p">.</span><span class="na">Namespace</span><span class="p">.</span><span class="na">GLOBAL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ext1&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">create</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here, value applied by extension under key <code>ext1</code> would be applied to configuration <code>ext1</code> path.
If you need to use different configuration key:</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="na">configOverrideByExtension</span><span class="p">(</span><span class="n">ExtensionContext</span><span class="p">.</span><span class="na">Namespace</span><span class="p">.</span><span class="na">GLOBAL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ext1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;key&quot;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>You can use <a href="#test-environment-setup">setup objects</a> instead of custom junit extensions for test environment setup</p>
</div>
<h2 id="test-environment-setup">Test environment setup<a class="headerlink" href="#test-environment-setup" title="Permanent link">&para;</a></h2>
<p>It is often required to prepare test environment before starting dropwizard application.
Normally, such cases require writing custom junit extensions. In order to simplify
environment setup, guicey provides <code>TestEnviromentSetup</code> interface.</p>
<p>Setup objects are called before application startup and could directly apply (through parameter)
configuration overrides and hooks.</p>
<p>For example, suppose you need to set up a database before test:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">TestDbSetup</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="n">TestExtension</span><span class="w"> </span><span class="n">extension</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// pseudo code</span><span class="w"></span>
<span class="w">        </span><span class="n">Db</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">DbFactory</span><span class="p">.</span><span class="na">startTestDb</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="c1">// register required configuration</span><span class="w"></span>
<span class="w">        </span><span class="n">extension</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;database.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="na">getUrl</span><span class="p">())</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;database.user&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="na">getUser</span><span class="p">())</span><span class="w"></span>
<span class="w">                </span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;database.password&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">db</span><span class="p">.</span><span class="na">getPassword</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="c1">// assuming object implements Closable</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">db</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>It is not required to return anything, only if something needs to be closed after application shutdown:
objects other than <code>Closable</code> (<code>AutoClosable</code>) or <code>org.junit.jupiter.api.extension.ExtensionContext.Store.CloseableResource</code>
simply ignored.
This approach (only one method) simplifies interface usage with lambdas.</p>
<p>Setup object might be declared in extension annotation: </p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">setup</span><span class="o">=</span><span class="n">TestDbSetup</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Or in manual registration:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="c1">// as class</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">setup</span><span class="p">(</span><span class="n">TestDbSetup</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="c1">// or as instance</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">setup</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">TestDbSetup</span><span class="p">())</span><span class="w"></span>
</code></pre></div>
<p>Or with lambda:</p>
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="na">setup</span><span class="p">(</span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Db</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Db</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="n">ext</span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;db.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="o">-&gt;</span><span class="n">db</span><span class="p">.</span><span class="na">getUrl</span><span class="p">())</span><span class="w"></span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">db</span><span class="p">;</span><span class="w"></span>
<span class="p">})</span><span class="w"></span>
</code></pre></div>
<h3 id="setup-fields">Setup fields<a class="headerlink" href="#setup-fields" title="Permanent link">&para;</a></h3>
<p>Alternatively, setup objects might be declared simply in test fields:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Db</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Db</span><span class="p">();</span><span class="w"></span>
<span class="w">            </span><span class="n">ext</span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;db.url&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="o">-&gt;</span><span class="n">db</span><span class="p">.</span><span class="na">getUrl</span><span class="p">())</span><span class="w"></span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">db</span><span class="p">;</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>or </p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestDbSetup</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TestDbSetup</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>This could be extremely useful if you need to unify setup logic for multiple tests,
but use different extension declarations in test. In this case simply move field
declaration into base test class:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaseTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@EnableSetup</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">TestDbSetup</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">TestDbSetup</span><span class="p">();</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To avoid confusion with guicey hooks: setup object required to prepare test environment before test (and apply
required configurations) whereas hooks is a general mechanism for application customization (not only in tests).
Setup objects are executed before application startup (before <code>DropwizardTestSupport</code> object creation) and hooks 
are executed by started application.</p>
</div>
<h2 id="application-test-modification">Application test modification<a class="headerlink" href="#application-test-modification" title="Permanent link">&para;</a></h2>
<p>You can use <a href="../overview/#configuration-hooks">hooks to customize application</a>.</p>
<p>In both extensions annotation hooks could be declared with attribute:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">hooks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyHook</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyApplication</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">hooks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyHook</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>Where MyHook is:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyHook</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyConfigurationHook</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
</code></pre></div>
<h3 id="hook-fields">Hook fields<a class="headerlink" href="#hook-fields" title="Permanent link">&para;</a></h3>
<p>Alternatively, you can declare hook directly in test field:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableHook</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">GuiceyConfigurationHook</span><span class="w"> </span><span class="n">HOOK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">modules</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DebugModule</span><span class="p">());</span><span class="w"></span>
</code></pre></div>
<p>Any number of fields could be declared. The same way hook could be declared in base test class:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaseTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="c1">// hook in base class</span><span class="w"></span>
<span class="w">    </span><span class="nd">@EnableHook</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">GuiceyConfigurationHook</span><span class="w"> </span><span class="n">BASE_HOOK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">modules</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DebugModule</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">hooks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">SomeOtherHook</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">SomeTest</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="c1">// Another hook</span><span class="w"></span>
<span class="w">    </span><span class="nd">@EnableHook</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">GuiceyConfigurationHook</span><span class="w"> </span><span class="n">HOOK</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">modules</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">DebugModule2</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>All 3 hooks will work.</p>
<h2 id="extension-configuration-unification">Extension configuration unification<a class="headerlink" href="#extension-configuration-unification" title="Permanent link">&para;</a></h2>
<p>It is a common need to run multiple tests with the same test application configuration
(same config overrides, same hooks etc.).
Do not configure it in each test, instead move extension configuration into base test class:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(...)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">AbstractTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="c1">// here might be helper methods</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>And now all test classes should simply extend it:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test1</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">AbstractTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">    </span><span class="n">MyService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">testSomething</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>If you use manual extension configuration (through field), just replace annotation in base class with
manual declaration - approach would still work.</p>
<h2 id="reuse-application-between-tests">Reuse application between tests<a class="headerlink" href="#reuse-application-between-tests" title="Permanent link">&para;</a></h2>
<p>In some cases it is preferable to start application just once and use for all tests
(e.g. due to long startup or time-consuming environment preparation).</p>
<p>In order to use the same application instance, extension declaration must be performed in 
<a href="#extension-configuration-unification">base test class</a> and <code>reuseApplication</code> flag must be enabled:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Application</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">reuseApplication</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaseTest</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>
</code></pre></div>
<p>or</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">abstract</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaseTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">reuseApplication</span><span class="p">()</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">create</span><span class="p">();</span><span class="w"></span>

<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>The same will work for dropwizard extension (<code>@TestDropwizardApp</code> and <code>TestDropwizardAppExtension</code>).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Application instance re-use is not enabled by default for backwards compatibility
(for cases when base class declaration already used).</p>
</div>
<p>There might be multiple base test classes declaring reusable applications:
different global applications would be started for each declaration (allowing you
to group tests requiring different applications) </p>
<p>Global application would be closed after all tests execution (with test engine shutdown).</p>
<p>In essence, reusable application "stick" to declaration in base class, so all tests,
extending base class "inherit" the same declaration and so the same application (when reuse enabled).</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Reusable applications may be used together with tests, not extending base class
and using guicey extensions. Such tests would simply start a new application instance.
Just be sure to avoid port clashes when using reusable dropwizard apps (by using <code>randomPorts</code> option).</p>
</div>
<p><code>@EnableSetup</code> and <code>@EnableHook</code> fields are also supported for reusable applications.
But declare all such fields on base class level (or below) because otherwise only fields
declared on first started test would be used. Warning would be printed if such fields used
(or ignored because reusable app was already started by different test).</p>
<h2 id="parallel-execution">Parallel execution<a class="headerlink" href="#parallel-execution" title="Permanent link">&para;</a></h2>
<p>Junit <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution">parallel tests execution</a>
could be activated with properties file <code>junit-platform.properties</code> located at test resources root:</p>
<div class="highlight"><pre><span></span><code><span class="na">junit.jupiter.execution.parallel.enabled</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">true</span><span class="w"></span>
<span class="na">junit.jupiter.execution.parallel.mode.default</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">concurrent</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to avoid config overriding collisions (because all overrides eventually stored to system properties)
guicey generates unique property prefixes in each test.</p>
</div>
<p>To avoid port collisions in dropwizard tests use <a href="#random-ports">randomPorts option</a>.</p>
<h2 id="alternative-declaration">Alternative declaration<a class="headerlink" href="#alternative-declaration" title="Permanent link">&para;</a></h2>
<p>Both extensions could be declared in fields:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestDropwizardAppExtension</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestDropwizardAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">config</span><span class="p">(</span><span class="s">&quot;src/test/resources/ru/vyarus/dropwizard/guice/config.yml&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">configOverrides</span><span class="p">(</span><span class="s">&quot;foo: 2&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bar: 12&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">randomPorts</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">hooks</span><span class="p">(</span><span class="n">Hook</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">hooks</span><span class="p">(</span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">builder</span><span class="p">.</span><span class="na">disableExtensions</span><span class="p">(</span><span class="n">DummyManaged</span><span class="p">.</span><span class="na">class</span><span class="p">))</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">create</span><span class="p">();</span><span class="w"></span>
</code></pre></div>
<p>The only difference with annotations is that you can declare hooks and setup objects as lambdas directly 
(still hooks in static fields will also work).</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">...</span><span class="w"></span>
</code></pre></div>
<p>This alternative declaration is intended to be used in cases when guicey extensions need to be aligned with
other 3<sup>rd</sup> party extensions: in junit you can order extensions declared with annotations (by annotation order)
and extensions declared with <code>@RegisterExtension</code> (by declaration order). But there is no way
to order extension registered with <code>@RegisterExtension</code> before annotation extension.</p>
<p>So if you have 3<sup>rd</sup> party extension which needs to be executed BEFORE guicey extensions, you can use field declaration.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Junit 5 intentionally shuffle <code>@RegisterExtension</code> extensions order, but you can always order them with
<code>@Order</code> annotation.</p>
</div>
<h3 id="start-application-by-test-method">Start application by test method<a class="headerlink" href="#start-application-by-test-method" title="Permanent link">&para;</a></h3>
<p>When you declare extensions with annotations or with <code>@RegisterExtension</code> in static fields,
application would be started before all test methods and shut down after last test method.</p>
<p>If you want to start application <em>for each test method</em> then declare extension in non-static field:</p>
<div class="highlight"><pre><span></span><code><span class="n">RegisterExtension</span><span class="w"></span>
<span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">create</span><span class="p">()</span><span class="w"></span>

<span class="c1">// injection would be re-newed for each test method</span><span class="w"></span>
<span class="nd">@Inject</span><span class="w"> </span><span class="n">Bean</span><span class="w"> </span><span class="n">bean</span><span class="p">;</span><span class="w"></span>

<span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">bean</span><span class="p">.</span><span class="na">value</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="c1">// changing value to show that bean was reset between tests</span><span class="w"></span>
<span class="w">    </span><span class="n">bean</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">    </span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">bean</span><span class="p">.</span><span class="na">value</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="n">bean</span><span class="p">.</span><span class="na">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Also, <code>@EnableHook</code> and <code>@EnableSetup</code> fields might also be not static (but static fields would also work) in this case:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">create</span><span class="p">()</span><span class="w"></span>

<span class="nd">@EnableSetup</span><span class="w"></span>
<span class="n">MySetup</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MySetup</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<h2 id="debug">Debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h2>
<p>Debug option could be activated on extensions in order to print</p>
<p>registered setup objects and hooks (registered in test):</p>
<div class="highlight"><pre><span></span><code>Guicey test extensions (Test2.):

    Setup objects = 
        HookObjectsLogTest$Test2$$Lambda$349/1644231115 (r.v.d.g.t.j.hook)                  @EnableSetup field Test2.setup

    Test hooks = 
        HookObjectsLogTest$Base$$Lambda$341/1127224355 (r.v.d.g.t.j.hook)                   @EnableHook field Base.base1
        Ext1                         (r.v.d.g.t.j.h.HookObjectsLogTest)                     @RegisterExtension class
        HookObjectsLogTest$Test2$$Lambda$345/484589713 (r.v.d.g.t.j.hook)                   @RegisterExtension instance
        Ext3                         (r.v.d.g.t.j.h.HookObjectsLogTest)                     HookObjectsLogTest$Test2$$Lambda$349/1644231115 class
        HookObjectsLogTest$Test2$$Lambda$369/1911152052 (r.v.d.g.t.j.hook)                  HookObjectsLogTest$Test2$$Lambda$349/1644231115 instance
        HookObjectsLogTest$Test2$$Lambda$350/537066525 (r.v.d.g.t.j.hook)                   @EnableHook field Test2.ext1
</code></pre></div>
<p>which prints registered objects in the execution order and with registration source in the right.</p>
<p>And applied configuration overrides:</p>
<div class="highlight"><pre><span></span><code>Applied configuration overrides (Test1.): 

                      foo = 1
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Configuration overrides printed <strong>after</strong> application startup because they are
extracted from system properties (to guarantee exact used value), which is possible
to analyze only after <code>DropwizardTestSupport#before()</code> call.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Configuration prefix for system properties is shown in brackets: <code>(Test1.)</code>.
It simplifies investigation in case of concurrent tests.</p>
</div>
<p>Debug could be activated by annotation:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>By builder:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">debug</span><span class="p">()</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">create</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>By setup object:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">db</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">ext</span><span class="p">.</span><span class="na">debug</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">};</span><span class="w"></span>
</code></pre></div>
<p>And using system property:</p>
<div class="highlight"><pre><span></span><code>-Dguicey.extensions.debug=true
</code></pre></div>
<p>There is also a shortcut for enabling system property:</p>
<div class="highlight"><pre><span></span><code><span class="n">TestSupport</span><span class="p">.</span><span class="na">debugExtensions</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<h2 id="junit-nested-classes">Junit nested classes<a class="headerlink" href="#junit-nested-classes" title="Permanent link">&para;</a></h2>
<p>Junit natively supports <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-nested">nested tests</a>.</p>
<p>Guicey extensions affects all nested tests below declaration (nesting level is not limited):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">NestedPropagationTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">    </span><span class="n">Environment</span><span class="w"> </span><span class="n">environment</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkInjection</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotNull</span><span class="p">(</span><span class="n">environment</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Nested</span><span class="w"></span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Inner</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">        </span><span class="n">Environment</span><span class="w"> </span><span class="n">env</span><span class="p">;</span><span class="w"> </span><span class="c1">// intentionally different name</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkInjection</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotNull</span><span class="p">(</span><span class="n">env</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Nested tests will use exactly the same guice context as root test (application started only once).</p>
</div>
<p>Extension declared on nested test will affect all sub-tests:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">NestedTreeTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Nested</span><span class="w"></span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">Level1</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">        </span><span class="n">Environment</span><span class="w"> </span><span class="n">environment</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkExtensionApplied</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotNull</span><span class="p">(</span><span class="n">environment</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Nested</span><span class="w"></span>
<span class="w">        </span><span class="kd">class</span> <span class="nc">Level2</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">            </span><span class="n">Environment</span><span class="w"> </span><span class="n">env</span><span class="p">;</span><span class="w"></span>

<span class="w">            </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">            </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkExtensionApplied</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotNull</span><span class="p">(</span><span class="n">env</span><span class="p">);</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>

<span class="w">            </span><span class="nd">@Nested</span><span class="w"></span>
<span class="w">            </span><span class="kd">class</span> <span class="nc">Level3</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">                </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">                </span><span class="n">Environment</span><span class="w"> </span><span class="n">envr</span><span class="p">;</span><span class="w"></span>

<span class="w">                </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">                </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkExtensionApplied</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotNull</span><span class="p">(</span><span class="n">envr</span><span class="p">);</span><span class="w"></span>
<span class="w">                </span><span class="p">}</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Nested</span><span class="w"></span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">NotAffected</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="nd">@Inject</span><span class="w"></span>
<span class="w">        </span><span class="n">Environment</span><span class="w"> </span><span class="n">environment</span><span class="p">;</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">extensionNotApplied</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNull</span><span class="p">(</span><span class="n">environment</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This way nested tests allows you to use different extension configurations in one (root) class.</p>
<p>Note that extension declaration with <code>@RegisterExtension</code> on the root class field would also
be applied to nested tests. Even declaration in non-static field (start application for each method)
would also work.</p>
<h3 id="use-interfaces-to-share-tests">Use interfaces to share tests<a class="headerlink" href="#use-interfaces-to-share-tests" title="Permanent link">&para;</a></h3>
<p>This is just a tip on how to execute same test method in different environments.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ClientSupportDwTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="kd">interface</span> <span class="nc">ClientCallTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// test to apply for multiple environments</span><span class="w"></span>
<span class="w">        </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">        </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">callClient</span><span class="p">(</span><span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;main&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">targetMain</span><span class="p">(</span><span class="s">&quot;servlet&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">                    </span><span class="p">.</span><span class="na">request</span><span class="p">().</span><span class="na">buildGet</span><span class="p">().</span><span class="na">invoke</span><span class="p">().</span><span class="na">readEntity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">));</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@TestDropwizardApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Nested</span><span class="w"></span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">DefaultConfig</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ClientCallTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">testClient</span><span class="p">(</span><span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;http://localhost:8080/&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">basePathMain</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>

<span class="w">    </span><span class="nd">@TestDropwizardApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">configOverride</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;server.applicationContextPath: /app&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="s">&quot;server.adminContextPath: /admin&quot;</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="p">},</span><span class="w"> </span><span class="n">restMapping</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;api&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="nd">@Nested</span><span class="w"></span>
<span class="w">    </span><span class="kd">class</span> <span class="nc">ChangedDefaultConfig</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ClientCallTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">        </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">        </span><span class="kt">void</span><span class="w"> </span><span class="nf">testClient</span><span class="p">(</span><span class="n">ClientSupport</span><span class="w"> </span><span class="n">client</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;http://localhost:8080/app/&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">client</span><span class="p">.</span><span class="na">basePathMain</span><span class="p">());</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Here test declared in <code>ClientCallTest</code> interface will be called for each nested test 
(one declaration - two executions in different environments).</p>
<h2 id="meta-annotation">Meta annotation<a class="headerlink" href="#meta-annotation" title="Permanent link">&para;</a></h2>
<p>You can prepare meta annotation (possibly combining multiple 3<sup>rd</sup> party extensions): </p>
<div class="highlight"><pre><span></span><code><span class="nd">@Retention</span><span class="p">(</span><span class="n">RetentionPolicy</span><span class="p">.</span><span class="na">RUNTIME</span><span class="p">)</span><span class="w"></span>
<span class="nd">@Target</span><span class="p">(</span><span class="n">ElementType</span><span class="p">.</span><span class="na">TYPE</span><span class="p">)</span><span class="w"></span>
<span class="nd">@TestDropwizardApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="nd">@interface</span><span class="w"> </span><span class="n">MyApp</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>

<span class="nd">@MyApp</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MetaAnnotationDwTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">checkAnnotationRecognized</span><span class="p">(</span><span class="n">Application</span><span class="w"> </span><span class="n">app</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNotNull</span><span class="p">(</span><span class="n">app</span><span class="p">);</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w">   </span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>OR you can simply use base test class and configure annotation there:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestDropwizardApp</span><span class="p">(</span><span class="n">AutoScanApplication</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">BaseTest</span><span class="w"> </span><span class="p">{}</span><span class="w"></span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ActualTest</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">BaseTest</span><span class="w"> </span><span class="p">{}</span><span class="w"> </span>
</code></pre></div>
<h2 id="testing-commands">Testing commands<a class="headerlink" href="#testing-commands" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Commands execution overrides System IO and so can't run in parallel with other tests!</p>
<p>Use <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution-synchronization"><code>@Isolated</code></a> 
on such tests to prevent parallel execution with other tests</p>
</div>
<p>Command execution is usually a short-lived action, so it is not possible to
write an extension for it. Command could be tested only with generic utility:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Test</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nf">testCommand</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">CommandResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestSupport</span><span class="p">.</span><span class="na">buildCommandRunner</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;cmd&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-p&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;param&quot;</span><span class="p">);</span><span class="w"></span>

<span class="w">    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">isSuccessful</span><span class="p">());</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Run command arguments are the same as real command arguments (the same <code>Cli</code> used for commands parsing).
You can only omit configuration path and use builder instead:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">CommandResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestSupport</span><span class="p">.</span><span class="na">buildCommandRunner</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">config</span><span class="p">(</span><span class="s">&quot;path/to/config.yml&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;prop: 1&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;cmd&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;-p&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;param&quot;</span><span class="p">);</span><span class="w"></span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Command execution never throws an exception - any appeared exception would be
inside resulted object.</p>
<p>Output is intercepted and could be used for assertions:
<div class="highlight"><pre><span></span><code><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">result</span><span class="p">.</span><span class="na">getOutput</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;some text&quot;</span><span class="p">))</span><span class="w"></span>
</code></pre></div></p>
<p>All special objects (like configuration, environment etc), created during command execution
are all stored inside the result object (this is the only way to access them). </p>
</div>
<p>Commands requiring user input are also supported:</p>
<div class="highlight"><pre><span></span><code><span class="n">CommandResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestSupport</span><span class="p">.</span><span class="na">buildCommandRunner</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">consoleInputs</span><span class="p">(</span><span class="s">&quot;1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;something else&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">run</span><span class="p">(</span><span class="s">&quot;quiz&quot;</span><span class="p">)</span><span class="w"></span>
</code></pre></div>
<p>This could be used to test any command (simple, configuration or environment), but
injector would be created only for environment command.</p>
<h2 id="testing-startup-error">Testing startup error<a class="headerlink" href="#testing-startup-error" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Commands execution overrides System IO and so can't run in parallel with other tests!</p>
<p>Use <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution-synchronization"><code>@Isolated</code></a> 
on such tests to prevent parallel execution with other tests</p>
</div>
<p>Tests for application startup fail often required to check some startup conditions.
The problem is that it's not enough to simply run the application with "bad" configuration file
because on error application calls <code>System.exit(1)</code> (see <code>Application.onFatalError</code>)</p>
<p>Instead, you can use command run utility:</p>
<div class="highlight"><pre><span></span><code><span class="n">CommandResult</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestSupport</span><span class="p">.</span><span class="na">buildCommandRunner</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">runApp</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><a href="../general/">Test framework-agnostic utilities</a> provides simple utilities to run application
(core or web). Could be useful when testing several applications interaction. </p>
</div>
<h2 id="environment-variables">Environment variables<a class="headerlink" href="#environment-variables" title="Permanent link">&para;</a></h2>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Such modifications are not suitable for parallel tests execution!</p>
<p>Use <a href="https://junit.org/junit5/docs/current/user-guide/#writing-tests-parallel-execution-synchronization"><code>@Isolated</code></a> 
on such tests to prevent parallel execution with other tests</p>
</div>
<p>To modify environment variables for test use <a href="https://github.com/webcompere/system-stubs">system stubs</a> library</p>
<div class="highlight"><pre><span></span><code><span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;uk.org.webcompere:system-stubs-jupiter:2.1.3&#39;</span><span class="w"></span>
<span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;org.objenesis:objenesis:3.3&#39;</span><span class="w"></span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@ExtendWith</span><span class="p">(</span><span class="n">SystemStubsExtension</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyTest</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="nd">@SystemStub</span><span class="w"></span>
<span class="w">    </span><span class="n">EnvironmentVariables</span><span class="w"> </span><span class="n">ENV</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nd">@SystemStub</span><span class="w"></span>
<span class="w">    </span><span class="n">SystemOut</span><span class="w"> </span><span class="n">out</span><span class="p">;</span><span class="w"></span>
<span class="w">    </span><span class="nd">@SystemStub</span><span class="w"></span>
<span class="w">    </span><span class="n">SystemProperties</span><span class="w"> </span><span class="n">propsReset</span><span class="p">;</span><span class="w"></span>

<span class="w">    </span><span class="nd">@BeforeAll</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setup</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">ENV</span><span class="p">.</span><span class="na">set</span><span class="p">(</span><span class="s">&quot;VAR&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1&quot;</span><span class="p">);</span><span class="w"></span>
<span class="w">        </span><span class="n">System</span><span class="p">.</span><span class="na">setProperty</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p">);</span><span class="w"> </span><span class="c1">// OR propsReset.set(&quot;foo&quot;, &quot;bar&quot;) - both works the same</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"> </span>

<span class="w">    </span><span class="nd">@Test</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="c1">// here goes some test that requires custom environment and system property values</span><span class="w"></span>

<span class="w">        </span><span class="c1">// validating output</span><span class="w"></span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">out</span><span class="p">.</span><span class="na">getTest</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;some log message&quot;</span><span class="p">));</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>Pay attention that there is no need for cleanup: system properties and environment variables would be re-set automatically!</p>
<h2 id="3rd-party-extensions-integration">3<sup>rd</sup> party extensions integration<a class="headerlink" href="#3rd-party-extensions-integration" title="Permanent link">&para;</a></h2>
<p>It is extremely simple in JUnit 5 to <a href="https://junit.org/junit5/docs/current/user-guide/#extensions">write extensions</a>.
If you do your own extension, you can easily integrate with guicey or dropwizard extensions: there
are special static methods allowing you to obtain main test objects:</p>
<ul>
<li><code>GuiceyExtensionsSupport.lookupSupport(extensionContext)</code> -&gt; <code>Optional&lt;DropwizardTestSupport&gt;</code></li>
<li><code>GuiceyExtensionsSupport.lookupInjector(extensionContext)</code> -&gt; <code>Optional&lt;Injector&gt;</code></li>
<li><code>GuiceyExtensionsSupport.lookupClient(extensionContext)</code> -&gt; <code>Optional&lt;ClientSupport&gt;</code></li>
</ul>
<p>For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyExtension</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">BeforeEachCallback</span><span class="w"> </span><span class="p">{</span><span class="w"></span>

<span class="w">    </span><span class="nd">@Override</span><span class="w"></span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">beforeEach</span><span class="p">(</span><span class="n">ExtensionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">Injector</span><span class="w"> </span><span class="n">injector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">GuiceyExtensionsSupport</span><span class="p">.</span><span class="na">lookupInjector</span><span class="p">(</span><span class="n">context</span><span class="p">).</span><span class="na">get</span><span class="p">();</span><span class="w"></span>
<span class="w">        </span><span class="p">...</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>(guicey holds test state in junit test-specific storages and that's why test context is required)</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>There is no way in junit to order extensions, so you will have to make sure that your extension
will be declared after guicey extension (<code>@TestGuiceyApp</code> or <code>@TestDropwizardApp</code>).</p>
</div>
<p>There is intentionally no direct api for applying configuration overrides from
3<sup>rd</sup> party extensions because it would be not obvious. Instead, you should always 
declare overridden value in extension declaration. Either use instance getter:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">MyExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyExtension</span><span class="p">()</span><span class="w"></span>

<span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">dw</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;some.key&quot;</span><span class="p">,</span><span class="w"> </span><span class="p">()</span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ext</span><span class="p">.</span><span class="na">getValue</span><span class="p">())</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">create</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>Or store value <a href="#configuration-from-3rd-party-extensions">inside junit store</a> and then reference it:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span><span class="w"></span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">configOverrideByExtension</span><span class="p">(</span><span class="n">ExtensionContext</span><span class="p">.</span><span class="na">Namespace</span><span class="p">.</span><span class="na">GLOBAL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;ext1&quot;</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="p">.</span><span class="na">create</span><span class="p">();</span><span class="w"></span>
</code></pre></div>


  




                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Footer" >
      
        
        <a href="../spock2/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Spock 2" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Spock 2
            </div>
          </div>
        </a>
      
      
        
        <a href="../general/" class="md-footer__link md-footer__link--next" aria-label="Next: General support" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              General support
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014-2024 Vyacheslav Rusakov
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
      
      
    
    <a href="https://github.com/xvik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.2.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tracking", "navigation.top"], "search": "../../../assets/javascripts/workers/search.16e2a7d4.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.8492ddcf.min.js"></script>
      
    
  </body>
</html>