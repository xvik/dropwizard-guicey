
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Dropwizard guice integration">
      
      
        <meta name="author" content="Vyacheslav Rusakov">
      
      
        <link rel="canonical" href="https://xvik.github.io/dropwizard-guicey/7.2.1/about/release-notes/">
      
      
        <link rel="prev" href="../../examples/jdbi3/">
      
      
        <link rel="next" href="../compatibility/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.17">
    
    
      
        <title>Release notes - Dropwizard-guicey</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.bcfcd587.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function n(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],n("js",new Date),n("config","UA-93174150-1"),document.addEventListener("DOMContentLoaded",function(){document.forms.search&&document.forms.search.query.addEventListener("blur",function(){this.value&&n("event","search",{search_term:this.value})}),document$.subscribe(function(){var a=document.forms.feedback;if(void 0!==a)for(var e of a.querySelectorAll("[type=submit]"))e.addEventListener("click",function(e){e.preventDefault();var t=document.location.pathname,e=this.getAttribute("data-md-value");n("event","feedback",{page:t,data:e}),a.firstElementChild.disabled=!0;e=a.querySelector(".md-feedback__note [data-md-value='"+e+"']");e&&(e.hidden=!1)}),a.hidden=!1}),location$.subscribe(function(e){n("config","UA-93174150-1",{page_path:e.pathname})})});var e=document.createElement("script");e.async=!0,e.src="https://www.googletagmanager.com/gtag/js?id=UA-93174150-1",document.getElementById("__analytics").insertAdjacentElement("afterEnd",e)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#720-release-notes" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
      <div data-md-color-scheme="default" data-md-component="outdated" hidden>
        
      </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Dropwizard-guicey" class="md-header__button md-logo" aria-label="Dropwizard-guicey" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Dropwizard-guicey
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Release notes
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../getting-started/" class="md-tabs__link">
          
  
  Getting started

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../guide/configuration/" class="md-tabs__link">
          
  
  User guide

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../installers/resource/" class="md-tabs__link">
          
  
  Installers

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../extras/bom/" class="md-tabs__link">
          
  
  Modules

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../examples/authentication/" class="md-tabs__link">
          
  
  Examples

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  About

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Dropwizard-guicey" class="md-nav__button md-logo" aria-label="Dropwizard-guicey" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Dropwizard-guicey
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/xvik/dropwizard-guicey" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    dropwizard-guicey
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guice/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tests/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../decomposition/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Decomposition
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    User guide
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/configuration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/web/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/modules/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extra integrations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/bundles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bundles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/yaml-values/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yaml values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Guice
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Guice
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/guice/injector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Injector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/guice/bindings/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bindings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/guice/scopes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scopes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/guice/module-autowiring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Module autowiring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/guice/module-analysis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Modules analysis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/guice/override/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Override bindings
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/guice/servletmodule/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ServletModule
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_8" >
        
          
          <label class="md-nav__link" for="__nav_3_8" id="__nav_3_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Diagnostic
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_8">
            <span class="md-nav__icon md-icon"></span>
            Diagnostic
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/diagnostic-tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/startup-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Startup times
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/extensions-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extensions help
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/configuration-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/configuration-model/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Configuration model
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/installers-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/yaml-values-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Yaml values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/lifecycle-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/guice-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guice
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/guice-provision-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guice provision time
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/aop-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AOP
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/web-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/jersey-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jersey
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/diagnostic/shared-state-report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shared state
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9" >
        
          
          <label class="md-nav__link" for="__nav_3_9" id="__nav_3_9_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Test
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9">
            <span class="md-nav__icon md-icon"></span>
            Test
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/overview/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Base concepts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/assertj/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AssertJ
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9_3" >
        
          
          <label class="md-nav__link" for="__nav_3_9_3" id="__nav_3_9_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    General tools
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_9_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9_3">
            <span class="md-nav__icon md-icon"></span>
            General tools
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/general/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Overview
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing web (HTTP client)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/startup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing startup fails
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/output/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing console output
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing logs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/stubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing with stubs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/mocks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing with mocks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/spies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing with spies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/general/tracks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing performance (bean tracking)
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_9_4" >
        
          
          <label class="md-nav__link" for="__nav_3_9_4" id="__nav_3_9_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Junit 5
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_9_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_9_4">
            <span class="md-nav__icon md-icon"></span>
            Junit 5
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/run/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing application
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application modification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/config/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Application configuration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/inject/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guice injections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/setup-object/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Test environment setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/client/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing web (HTTP client)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/command/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/startup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing startup fails
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/output/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing console output
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing logs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/stubs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing with stubs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/mocks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing with mocks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/spies/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing with spies
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/tracks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing performance (bean tracking)
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/unification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tests unification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/debug/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Debug
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/nested/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nested tests
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/env/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Environment variables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/parallel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Parallel execution
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/junit-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Junit extensions integration
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit5/test-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Testing extensions
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/spock2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spock 2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/spock/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Spock 1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/junit4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Junit 4
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/test/openapi-server/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI fake server
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/scan/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Classpath scan
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/installers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/ordering/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Ordering
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/options/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Options
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/events/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Events
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/disables/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Disables
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/deduplication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    De-duplication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/commands/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Commands
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/hooks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hooks
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/shared/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Shared state
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../guide/hk2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HK2
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Installers
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Installers
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/resource/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resource
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/task/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Task
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/managed/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Managed
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/lifecycle/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/healthcheck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Health check
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/jersey-ext/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jersey extension
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/jersey-feature/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Jersey feature
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/eager/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Eager singleton
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/plugin/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Plugin
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/servlet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web servlet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/filter/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web filter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installers/listener/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Web listener
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Modules
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Modules
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/bom/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    BOM
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/admin-rest/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Admin REST
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/lifecycle-annotations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lifecycle annotations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/eventbus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Guava EventBus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/jdbi3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JDBI3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/spa/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SPA
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/gsp/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Server Pages
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../extras/validation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Validation
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/authentication/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Authentication
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/governator/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Governator
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/hibernate/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Hibernate
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/eventbus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EventBus
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/jdbi3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    JDBI3
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" checked>
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="">
            
  
  <span class="md-ellipsis">
    About
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            About
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Release notes
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#un-deprecated-hk2-support" class="md-nav__link">
    <span class="md-ellipsis">
      Un-deprecated HK2 support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicebundle-builder" class="md-nav__link">
    <span class="md-ellipsis">
      GuiceBundle builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GuiceBundle builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-awareness" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration awareness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listener-shortcuts" class="md-nav__link">
    <span class="md-ellipsis">
      Listener shortcuts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagnostic-reports" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnostic reports
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Diagnostic reports">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-startup-time-report" class="md-nav__link">
    <span class="md-ellipsis">
      Application startup time report
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guice-provision-time" class="md-nav__link">
    <span class="md-ellipsis">
      Guice provision time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-state-report" class="md-nav__link">
    <span class="md-ellipsis">
      Shared state report
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guice-bindings-report-fixes" class="md-nav__link">
    <span class="md-ellipsis">
      Guice bindings report fixes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guiceybundle" class="md-nav__link">
    <span class="md-ellipsis">
      GuiceyBundle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GuiceyBundle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checked-initialization-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Checked initialization exceptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-extensions-at-run-phase" class="md-nav__link">
    <span class="md-ellipsis">
      Register extensions at run phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transitive-guice-bundles-order" class="md-nav__link">
    <span class="md-ellipsis">
      Transitive guice bundles order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listeners-shortcuts" class="md-nav__link">
    <span class="md-ellipsis">
      Listeners shortcuts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hook" class="md-nav__link">
    <span class="md-ellipsis">
      Hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#private-guice-modules-support" class="md-nav__link">
    <span class="md-ellipsis">
      Private guice modules support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classpath-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Classpath scan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classpath scan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extensions-scan-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Extensions scan filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-extension-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Private extension classes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disable-predicate" class="md-nav__link">
    <span class="md-ellipsis">
      Disable predicate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shared-state" class="md-nav__link">
    <span class="md-ellipsis">
      Shared state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shared state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-key-breaking" class="md-nav__link">
    <span class="md-ellipsis">
      State key (BREAKING)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-accessor" class="md-nav__link">
    <span class="md-ellipsis">
      Options accessor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive-access" class="md-nav__link">
    <span class="md-ellipsis">
      Reactive access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test" class="md-nav__link">
    <span class="md-ellipsis">
      Test
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-managed-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Disable managed lifecycle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-configuration-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Manual configuration objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-override-for-a-single-key" class="md-nav__link">
    <span class="md-ellipsis">
      Config override for a single key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration modifiers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-block" class="md-nav__link">
    <span class="md-ellipsis">
      Custom configuration block
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-option-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Debug option evolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debug option evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extensions-time" class="md-nav__link">
    <span class="md-ellipsis">
      Extensions time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updated-declarations-report" class="md-nav__link">
    <span class="md-ellipsis">
      Updated declarations report
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inject-test-fields-once" class="md-nav__link">
    <span class="md-ellipsis">
      Inject test fields once
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-objects-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Setup objects evolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup objects evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#junit-context" class="md-nav__link">
    <span class="md-ellipsis">
      Junit context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lifecycle-listeners" class="md-nav__link">
    <span class="md-ellipsis">
      Lifecycle listeners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-debug" class="md-nav__link">
    <span class="md-ellipsis">
      Extension debug
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotated-fields-search-api" class="md-nav__link">
    <span class="md-ellipsis">
      Annotated fields search API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-lookup" class="md-nav__link">
    <span class="md-ellipsis">
      Auto lookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-test-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      New test extensions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New test extensions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stubs" class="md-nav__link">
    <span class="md-ellipsis">
      Stubs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mocks" class="md-nav__link">
    <span class="md-ellipsis">
      Mocks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spies" class="md-nav__link">
    <span class="md-ellipsis">
      Spies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trackers" class="md-nav__link">
    <span class="md-ellipsis">
      Trackers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Trackers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    <span class="md-ellipsis">
      Searching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Performance metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-stubs" class="md-nav__link">
    <span class="md-ellipsis">
      REST stubs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REST stubs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selecting-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-jersey-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling jersey extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    <span class="md-ellipsis">
      Debug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requests-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Requests logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-client" class="md-nav__link">
    <span class="md-ellipsis">
      Rest client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Testing logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal" class="md-nav__link">
    <span class="md-ellipsis">
      Internal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Internal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beforeinit-event" class="md-nav__link">
    <span class="md-ellipsis">
      BeforeInit event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-installers-marker" class="md-nav__link">
    <span class="md-ellipsis">
      Web installers marker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Migration guide
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../compatibility/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Compatibility
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../migration/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Migration guide
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../history/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Version history
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../license/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    License
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#un-deprecated-hk2-support" class="md-nav__link">
    <span class="md-ellipsis">
      Un-deprecated HK2 support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guicebundle-builder" class="md-nav__link">
    <span class="md-ellipsis">
      GuiceBundle builder
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GuiceBundle builder">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#configuration-awareness" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration awareness
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listener-shortcuts" class="md-nav__link">
    <span class="md-ellipsis">
      Listener shortcuts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#diagnostic-reports" class="md-nav__link">
    <span class="md-ellipsis">
      Diagnostic reports
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Diagnostic reports">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#application-startup-time-report" class="md-nav__link">
    <span class="md-ellipsis">
      Application startup time report
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guice-provision-time" class="md-nav__link">
    <span class="md-ellipsis">
      Guice provision time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#shared-state-report" class="md-nav__link">
    <span class="md-ellipsis">
      Shared state report
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#guice-bindings-report-fixes" class="md-nav__link">
    <span class="md-ellipsis">
      Guice bindings report fixes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#guiceybundle" class="md-nav__link">
    <span class="md-ellipsis">
      GuiceyBundle
    </span>
  </a>
  
    <nav class="md-nav" aria-label="GuiceyBundle">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#checked-initialization-exceptions" class="md-nav__link">
    <span class="md-ellipsis">
      Checked initialization exceptions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#register-extensions-at-run-phase" class="md-nav__link">
    <span class="md-ellipsis">
      Register extensions at run phase
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#transitive-guice-bundles-order" class="md-nav__link">
    <span class="md-ellipsis">
      Transitive guice bundles order
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#listeners-shortcuts" class="md-nav__link">
    <span class="md-ellipsis">
      Listeners shortcuts
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#hook" class="md-nav__link">
    <span class="md-ellipsis">
      Hook
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#private-guice-modules-support" class="md-nav__link">
    <span class="md-ellipsis">
      Private guice modules support
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#classpath-scan" class="md-nav__link">
    <span class="md-ellipsis">
      Classpath scan
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Classpath scan">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extensions-scan-filters" class="md-nav__link">
    <span class="md-ellipsis">
      Extensions scan filters
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#private-extension-classes" class="md-nav__link">
    <span class="md-ellipsis">
      Private extension classes
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disable-predicate" class="md-nav__link">
    <span class="md-ellipsis">
      Disable predicate
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#shared-state" class="md-nav__link">
    <span class="md-ellipsis">
      Shared state
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Shared state">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#state-key-breaking" class="md-nav__link">
    <span class="md-ellipsis">
      State key (BREAKING)
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#options-accessor" class="md-nav__link">
    <span class="md-ellipsis">
      Options accessor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reactive-access" class="md-nav__link">
    <span class="md-ellipsis">
      Reactive access
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test" class="md-nav__link">
    <span class="md-ellipsis">
      Test
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Test">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#disable-managed-lifecycle" class="md-nav__link">
    <span class="md-ellipsis">
      Disable managed lifecycle
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#manual-configuration-objects" class="md-nav__link">
    <span class="md-ellipsis">
      Manual configuration objects
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#config-override-for-a-single-key" class="md-nav__link">
    <span class="md-ellipsis">
      Config override for a single key
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#configuration-modifiers" class="md-nav__link">
    <span class="md-ellipsis">
      Configuration modifiers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#custom-configuration-block" class="md-nav__link">
    <span class="md-ellipsis">
      Custom configuration block
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug-option-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Debug option evolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Debug option evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#extensions-time" class="md-nav__link">
    <span class="md-ellipsis">
      Extensions time
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#updated-declarations-report" class="md-nav__link">
    <span class="md-ellipsis">
      Updated declarations report
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#inject-test-fields-once" class="md-nav__link">
    <span class="md-ellipsis">
      Inject test fields once
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setup-objects-evolution" class="md-nav__link">
    <span class="md-ellipsis">
      Setup objects evolution
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Setup objects evolution">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#junit-context" class="md-nav__link">
    <span class="md-ellipsis">
      Junit context
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lifecycle-listeners" class="md-nav__link">
    <span class="md-ellipsis">
      Lifecycle listeners
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#extension-debug" class="md-nav__link">
    <span class="md-ellipsis">
      Extension debug
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#annotated-fields-search-api" class="md-nav__link">
    <span class="md-ellipsis">
      Annotated fields search API
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#auto-lookup" class="md-nav__link">
    <span class="md-ellipsis">
      Auto lookup
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-test-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      New test extensions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="New test extensions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#stubs" class="md-nav__link">
    <span class="md-ellipsis">
      Stubs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#mocks" class="md-nav__link">
    <span class="md-ellipsis">
      Mocks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#spies" class="md-nav__link">
    <span class="md-ellipsis">
      Spies
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#trackers" class="md-nav__link">
    <span class="md-ellipsis">
      Trackers
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Trackers">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#searching" class="md-nav__link">
    <span class="md-ellipsis">
      Searching
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-metrics" class="md-nav__link">
    <span class="md-ellipsis">
      Performance metrics
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-stubs" class="md-nav__link">
    <span class="md-ellipsis">
      REST stubs
    </span>
  </a>
  
    <nav class="md-nav" aria-label="REST stubs">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#selecting-resources" class="md-nav__link">
    <span class="md-ellipsis">
      Selecting resources
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#disabling-jersey-extensions" class="md-nav__link">
    <span class="md-ellipsis">
      Disabling jersey extensions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#debug" class="md-nav__link">
    <span class="md-ellipsis">
      Debug
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#requests-logging" class="md-nav__link">
    <span class="md-ellipsis">
      Requests logging
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#container" class="md-nav__link">
    <span class="md-ellipsis">
      Container
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#rest-client" class="md-nav__link">
    <span class="md-ellipsis">
      Rest client
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#testing-logs" class="md-nav__link">
    <span class="md-ellipsis">
      Testing logs
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#internal" class="md-nav__link">
    <span class="md-ellipsis">
      Internal
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Internal">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#beforeinit-event" class="md-nav__link">
    <span class="md-ellipsis">
      BeforeInit event
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#web-installers-marker" class="md-nav__link">
    <span class="md-ellipsis">
      Web installers marker
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide" class="md-nav__link">
    <span class="md-ellipsis">
      Migration guide
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="720-release-notes">7.2.0 Release Notes<a class="headerlink" href="#720-release-notes" title="Permanent link">&para;</a></h1>
<p>The release contains:</p>
<ul>
<li>Many improvements simplifying usage (main bundle, guicey bundles, shared state).</li>
<li>New reports for measuring application startup performance.</li>
<li>Private guice modules support</li>
<li>Many test improvements (stubs, mocks, spies, lightweight REST testing etc.)</li>
<li>Breaking shared state change (conceptual)</li>
</ul>
<h2 id="un-deprecated-hk2-support">Un-deprecated HK2 support<a class="headerlink" href="#un-deprecated-hk2-support" title="Permanent link">&para;</a></h2>
<p>All deprecation annotations removed for HK2 related features. Soft deprecation remain in javadoc.</p>
<p>It is possible to replace HK2 context with a child guice injector (conceptual prototype was ready long ago).
But it requires A LOT of time to finish. Eventually, it would be finished, but, for now,
other features are in priority.</p>
<p>Hard deprecation removed because there are no alternatives (and will not appear soon).
Sorry for the inconvenience.</p>
<h2 id="guicebundle-builder">GuiceBundle builder<a class="headerlink" href="#guicebundle-builder" title="Permanent link">&para;</a></h2>
<h3 id="configuration-awareness">Configuration awareness<a class="headerlink" href="#configuration-awareness" title="Permanent link">&para;</a></h3>
<p>Before, <code>GuiceyBundle</code> was required to perform any registrations, requiring configuration.
Now there is an alternative:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">   </span><span class="p">...</span>
<span class="w">   </span><span class="p">.</span><span class="na">whenConfigurationReady</span><span class="p">(</span><span class="n">env</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// env is GuiceyEnvironment, like in GuiceyBundle#run</span>
<span class="w">        </span><span class="n">AppConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="na">configuration</span><span class="p">();</span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="na">modules</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">GuiceModule</span><span class="p">(</span><span class="n">config</span><span class="p">));</span>
<span class="w">   </span><span class="p">});</span>
</code></pre></div>
<h3 id="listener-shortcuts">Listener shortcuts<a class="headerlink" href="#listener-shortcuts" title="Permanent link">&para;</a></h3>
<p>Listener shortcut methods added (same as in <code>GuiceyEnvironment</code>):</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">...</span>
<span class="w">    </span><span class="c1">// these listeners are shortcuts of guicey listeners (.listen())</span>
<span class="w">    </span><span class="c1">// guice injector created (dropwizard run phase)</span>
<span class="w">    </span><span class="p">.</span><span class="na">onGuiceyStartup</span><span class="p">((</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="p">,</span><span class="w"> </span><span class="n">injector</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// just an example - there could be loginc, usually declared </span>
<span class="w">        </span><span class="c1">// in application run method</span>
<span class="w">        </span><span class="n">env</span><span class="p">.</span><span class="na">jersey</span><span class="p">().</span><span class="na">register</span><span class="p">(</span><span class="n">injector</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">SomeBean</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
<span class="w">     </span><span class="p">})</span>
<span class="w">    </span><span class="c1">// executes after complete application startup (including guicey lightweight test)   </span>
<span class="w">    </span><span class="p">.</span><span class="na">onApplicationStartup</span><span class="p">(</span><span class="n">injector</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">    </span><span class="c1">//executes after application shutdown</span>
<span class="w">    </span><span class="p">.</span><span class="na">onApplicationShutdown</span><span class="p">(</span><span class="n">injector</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>

<span class="w">    </span><span class="c1">// these methods just for convenience: </span>
<span class="w">    </span><span class="c1">// they actually use .onGuiceyStartup() to register provided listeners</span>
<span class="w">    </span><span class="p">.</span><span class="na">listenServer</span><span class="p">(</span><span class="n">server</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span>
<span class="w">    </span><span class="p">.</span><span class="na">listenJetty</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">LifeCycle</span><span class="p">.</span><span class="na">Listener</span><span class="p">()</span><span class="w"> </span><span class="p">{...})</span>
<span class="w">    </span><span class="p">.</span><span class="na">listenJersey</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ApplicationEventListener</span><span class="p">()</span><span class="w"> </span><span class="p">{...})</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>All the same listeners could be registered within <code>.whenConfigurationReady(env -&gt; env.listenServer(...)</code>,
but still they remain in the main bundle for more clarity (simpler to find, simpler to use in some cases)</p>
</div>
<p>Also, note that all these methods are available now for <code>GuiceyConfigurationHook</code>.
For example, it could be used in tests:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nd">@EnableHook</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">GuiceyConfigurationHook</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">builder</span>
<span class="w">            </span><span class="p">.</span><span class="na">printStartupTime</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">onGuiceyStartup</span><span class="p">((</span><span class="n">config</span><span class="p">,</span><span class="w"> </span><span class="n">env</span><span class="p">,</span><span class="w"> </span><span class="n">injector</span><span class="p">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">env</span><span class="p">.</span><span class="na">lifecycle</span><span class="p">().</span><span class="na">manage</span><span class="p">(...));</span>
</code></pre></div>
<h2 id="diagnostic-reports">Diagnostic reports<a class="headerlink" href="#diagnostic-reports" title="Permanent link">&para;</a></h2>
<h3 id="application-startup-time-report">Application startup time report<a class="headerlink" href="#application-startup-time-report" title="Permanent link">&para;</a></h3>
<p>The new report intended to show the entire application startup time information to simplify
searching for bottlenecks. It's hard to measure everything exactly from a bundle,
but the report will try to show the time spent in each phase (init, run, web) and time of each
registered dropwizard bundle.</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">printStartupTime</span><span class="p">()</span>
</code></pre></div>
<p>Sample output:</p>
<div class="highlight"><pre><span></span><code>INFO  [2025-03-27 09:12:27,435] ru.vyarus.dropwizard.guice.debug.StartupTimeDiagnostic: Application startup time: 

    JVM time before                    : 1055 ms

    Application startup                : 807 ms
        Dropwizard initialization          : 127 ms
            GuiceBundle                        : 123 ms (finished since start at 127 ms)
                Bundle builder time                : 38 ms
                Hooks processing                   : 3.23 ms
                    StartupDiagnosticTest$Test1$$Lambda/0x0000711de72a1d70: 2.37 ms
                Classpath scan                     : 44 ms
                Commands processing                : 4.41 ms
                    DummyCommand                       : 0.42 ms
                    NonInjactableCommand               : 3.16 ms
                Bundles lookup                     : 1.15 ms
                Guicey bundles init                : 3.24 ms
                    WebInstallersBundle                : 0.52 ms
                    CoreInstallersBundle               : 1.83 ms
                Installers time                    : 21 ms
                    Installers resolution              : 15 ms
                    Scanned extensions recognition     : 6.13 ms
                Listeners time                     : 1.35 ms
                    ConfigurationHooksProcessedEvent   : 0.23 ms
                    BeforeInitEvent                    : 0.59 ms
                    BundlesResolvedEvent               : 0.009 ms
                    BundlesInitializedEvent            : 0.43 ms
                    CommandsResolvedEvent              : 0.006 ms
                    InstallersResolvedEvent            : 0.01 ms
                    ClasspathExtensionsResolvedEvent   : 0.009 ms
                    InitializedEvent                   : 0.007 ms

        Dropwizard run                     : 679 ms
            Configuration and Environment      : 483 ms
            GuiceBundle                        : 196 ms
                Configuration analysis             : 20 ms
        ...     
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Limitations</p>
<ul>
<li>Can't show init time of dropwizard bundles, registered before the guice bundle (obviously)</li>
<li><code>Applicaion#run</code> method time measured as part of "web" (the bundle can't see this point, but should not be a problem)</li>
</ul>
</div>
<p>The report could be also enabled for compiled application: <code>-Dguicey.hooks=startup-time</code> </p>
<h3 id="guice-provision-time">Guice provision time<a class="headerlink" href="#guice-provision-time" title="Permanent link">&para;</a></h3>
<p>The new report intended to show the time of guice beans provision (instance construction, 
including provider or provider method time). It shows all requested guice beans and the 
number of obtained instances (for prototype scopes). </p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">printGuiceProvisionTime</span><span class="p">()</span>
</code></pre></div>
<p>All provisions are sorted by time:</p>
<div class="highlight"><pre><span></span><code>INFO  [2025-03-27 09:20:32,313] ru.vyarus.dropwizard.guice.debug.GuiceProvisionDiagnostic: Guice bindings provision time: 

    Overall 57 provisions took 1.40 ms
        binding              [@Singleton]     ManagedFilterPipeline                                                                 : 0.88 ms            com.google.inject.servlet.InternalServletModule.configure(InternalServletModule.java:94)
        binding              [@Singleton]     ManagedServletPipeline                                                                : 0.45 ms            com.google.inject.servlet.InternalServletModule.configure(InternalServletModule.java:95)
        providerinstance     [@Singleton]     @ScopingOnly GuiceFilter                                                              : 0.02 ms            com.google.inject.servlet.InternalServletModule.provideScopingOnlyGuiceFilter(InternalServletModule.java:106)
        JIT                  [@Prototype]     JitService                                                                       x10  : 0.02 ms (0.006 ms + 0.002 ms + 0.001 ms + 0.001 ms + 0.001 ms + ...)       
        binding              [@Singleton]     GuiceyConfigurationInfo                                                               : 0.01 ms            ru.vyarus.dropwizard.guice.module.GuiceBootstrapModule.configure(GuiceBootstrapModule.java:63)
        binding              [@Singleton]     BackwardsCompatibleServletContextProvider                                             : 0.007 ms           com.google.inject.servlet.InternalServletModule.configure(InternalServletModule.java:99)
        instance             [@Singleton]     Bootstrap                                                                             : 0.004 ms           ru.vyarus.dropwizard.guice.module.GuiceBootstrapModule.bindEnvironment(GuiceBootstrapModule.java:71)
        instance             [@Singleton]     @Config(&quot;server.gzip.minimumEntitySize&quot;) DataSize                                     : 0.002 ms           ru.vyarus.dropwizard.guice.module.yaml.bind.ConfigBindingModule.bindValuePaths(ConfigBindingModule.java:129)
        instance             [@Singleton]     Environment                                                                           : 0.0009 ms          ru.vyarus.dropwizard.guice.module.GuiceBootstrapModule.bindEnvironment(GuiceBootstrapModule.java:72)
        instance             [@Singleton]     @Config AdminFactory                                                                  : 0.0008 ms          ru.vyarus.dropwizard.guice.module.yaml.bind.ConfigBindingModule.bindUniqueSubConfigurations(ConfigBindingModule.java:117)
        ...
</code></pre></div>
<p>The report will also try to detect injection mistakes in case when JIT (just in time) binding is used
when there are qualified declarations with the same type. </p>
<p>The most common mistake is configuration objects misuse: guicey binds unique configuration objects 
with <code>@Config</code> qualifier, but, if injection point declared without the qualifier,
guice will create a JIT binding (create new object instance) instead of injecting
declared instance. This might be hard to spot, especially when lombok is used (which may not
copy field annotation into constructor).</p>
<div class="highlight"><pre><span></span><code>INFO  [2025-03-27 09:21:33,438] ru.vyarus.dropwizard.guice.debug.GuiceProvisionDiagnostic: Guice bindings provision time: 

    Possible mistakes (unqualified JIT bindings):

         @Inject Sub:
              instance             [@Singleton]     @Config(&quot;val2&quot;) Sub                                                                   : 0.0005 ms        ru.vyarus.dropwizard.guice.module.yaml.bind.ConfigBindingModule.bindValuePaths(ConfigBindingModule.java:129)
              instance             [@Singleton]     @Marker Sub                                                                           : 0.0007 ms        ru.vyarus.dropwizard.guice.module.yaml.bind.ConfigBindingModule.bindCustomQualifiers(ConfigBindingModule.java:87)
            &gt; JIT                  [@Prototype]     Sub                                                                                   : 0.006 ms         

         @Inject Uniq:
              instance             [@Singleton]     @Config Uniq                                                                          : 0.0005 ms        ru.vyarus.dropwizard.guice.module.yaml.bind.ConfigBindingModule.bindUniqueSubConfigurations(ConfigBindingModule.java:117)
            &gt; JIT                  [@Prototype]     Uniq                                                                                  : 0.004 ms         

    Overall 53 provisions took 1.45 ms
        binding              [@Singleton]     ManagedFilterPipeline                                                                 : 0.78 ms            com.google.inject.servlet.InternalServletModule.configure(InternalServletModule.java:94)
        binding              [@Singleton]     ManagedServletPipeline                                                                : 0.44 ms            com.google.inject.servlet.InternalServletModule.configure(InternalServletModule.java:95)
</code></pre></div>
<p>In this example, the report detects incorrect injections:</p>
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="nd">@Inject</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Sub</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="w">   </span><span class="nd">@Inject</span>
<span class="w">   </span><span class="kd">private</span><span class="w"> </span><span class="n">Uniq</span><span class="w"> </span><span class="n">uniq</span><span class="p">;</span>
</code></pre></div>
<p>Detection will also work for generified bindings:</p>
<div class="highlight"><pre><span></span><code>    Possible mistakes (unqualified JIT bindings):

         @Inject Service:
              instance             [@Singleton]     Service&lt;Integer&gt;                                                                      : 0.0006 ms        ru.vyarus.dropwizard.guice.debug.provision.GenerifiedBindingsTest$App.lambda$configure$0(GenerifiedBindingsTest.java:46)
              instance             [@Singleton]     Service&lt;String&gt;                                                                       : 0.002 ms         ru.vyarus.dropwizard.guice.debug.provision.GenerifiedBindingsTest$App.lambda$configure$0(GenerifiedBindingsTest.java:45)
            &gt; JIT                  [@Prototype]     Service                                                                               : 0.004 ms         
</code></pre></div>
<p>The report could be also enabled for compiled application: <code>-Dguicey.hooks=provision-time</code></p>
<p>The report shows only provisions performed on application startup, but it could be used in 
tests to detect provision problems at runtime:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nd">@EnableHook</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">GuiceProvisionTimeHook</span><span class="w"> </span><span class="n">report</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">GuiceProvisionTimeHook</span><span class="p">();</span>

<span class="nd">@Test</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">testRuntimeReport</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// clear startup data</span>
<span class="w">    </span><span class="n">report</span><span class="p">.</span><span class="na">clearData</span><span class="p">();</span>
<span class="w">    </span><span class="c1">// do something that might cause additional provisions</span>
<span class="w">    </span><span class="n">injector</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">Service</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">    </span><span class="n">injector</span><span class="p">.</span><span class="na">getInstance</span><span class="p">(</span><span class="n">Service</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>

<span class="w">    </span><span class="c1">// assert</span>
<span class="w">    </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertThat</span><span class="p">(</span><span class="n">report</span><span class="p">.</span><span class="na">getRecordedData</span><span class="p">().</span><span class="na">keys</span><span class="p">().</span><span class="na">size</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// or just print report (only for recorded provisions)</span>
<span class="w">    </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="n">report</span><span class="p">.</span><span class="na">renderReport</span><span class="p">());</span>
<span class="p">}</span><span class="w">   </span>
</code></pre></div>
<h3 id="shared-state-report">Shared state report<a class="headerlink" href="#shared-state-report" title="Permanent link">&para;</a></h3>
<p>Guicey shared state is a bundle communication mechanism and safe "static" access 
for the important objects (quite rarely required). Before, it was not clear the real sequence of state 
population and access, and now there is a special report showing all state manipulations:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">printSharedStateUsage</span><span class="p">()</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>INFO  [2025-03-27 09:49:35,219] ru.vyarus.dropwizard.guice.debug.SharedStateDiagnostic: Shared configuration state usage: 

    SET Options (ru.vyarus.dropwizard.guice.module.context.option)                           at r.v.d.g.m.context.(ConfigurationContext.java:167)

    SET List (java.util)                                                                     at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:60)
        MISS at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:56)
        GET at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:57)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:60)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:61)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:62)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:73)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:74)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:82)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:84)

    SET Bootstrap (io.dropwizard.core.setup)                                                 at r.v.d.g.m.context.(ConfigurationContext.java:806)

    SET Map (java.util)                                                                      at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:97)
        MISS at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:93)
        GET at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:94)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:97)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:98)
        GET  at r.v.d.g.d.SharedStateDiagnosticTest.(SharedStateDiagnosticTest.java:101)
    ...     
</code></pre></div>
<h3 id="guice-bindings-report-fixes">Guice bindings report fixes<a class="headerlink" href="#guice-bindings-report-fixes" title="Permanent link">&para;</a></h3>
<p>Guice bindings report (<code>.printGuiceBindings()</code> or <code>.printAllGuiceBindings()</code>) was fixed:</p>
<ul>
<li>Fixed scope accuracy for linked bindings</li>
<li>Fixed bindings for private modules (missed exposed linked bindings)</li>
</ul>
<h2 id="guiceybundle">GuiceyBundle<a class="headerlink" href="#guiceybundle" title="Permanent link">&para;</a></h2>
<h3 id="checked-initialization-exceptions">Checked initialization exceptions<a class="headerlink" href="#checked-initialization-exceptions" title="Permanent link">&para;</a></h3>
<p>Added <code>throws Exception</code> in bundle init method:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This is not a breaking change: all existing bundles will work (even compiled with 
the previous guicey version). Existing runtime exception is re-thrown so even tests,
relying on the exception type or message would not break.
It's even possible to avoid <code>throws Exception</code> in new bundles.</p>
</div>
<p>Initially, <code>throws Exception</code> was not added to comply with dropwizard bundles (<code>ConfiguredBundle</code>):
dropwizard assumes only runtime exceptions in initialization phase and any exception 
in run phase.</p>
<p>But, it appears that often it is more useful to allow checked exceptions in init method to
avoid clumsy exception handling (especially for quick prototyping) and so checked exceptions
support was added. Runtime exceptions are rethrown as is.</p>
<h3 id="register-extensions-at-run-phase">Register extensions at run phase<a class="headerlink" href="#register-extensions-at-run-phase" title="Permanent link">&para;</a></h3>
<p>Now extensions could be registered in run phase:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">MyConfig</span><span class="w"> </span><span class="n">config</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">environment</span><span class="p">.</span><span class="na">configuration</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="na">isFeatureRequired</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">environment</span><span class="p">.</span><span class="na">extensions</span><span class="p">(</span><span class="n">SomeExtension</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">            </span><span class="c1">// OR</span>
<span class="w">            </span><span class="n">environment</span><span class="p">.</span><span class="na">extensionsOptions</span><span class="p">(</span><span class="n">SomeExtension</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Initially, it was assumed that all configuration should be done in the configuration phase.
But there are cases when extension registration depends on configuration (or even configuration provides 
additional extensions).</p>
<p>Disabling already registered extensions also appears to not cover all cases.</p>
<p>Also, guicey already detects extensions from guice bindings in the run phase, so it was
already registering extensions in the run phase.</p>
<p>Related internal changes (will not anything, just in case):</p>
<ul>
<li>Manually registered extensions now validated in run phase (and so <code>ManualExtensionsValidatedEvent</code> called at run phase)</li>
<li>As before, classpath scan is performed at configuration phase, but actual extensions
  registration appears at run phase (because manual extensions registered in priority)</li>
</ul>
<h3 id="transitive-guice-bundles-order">Transitive guice bundles order<a class="headerlink" href="#transitive-guice-bundles-order" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyBundle</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyBundle</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">initialize</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">GuiceyBootstrap</span><span class="w"> </span><span class="n">bootstrap</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// transitive bundle</span>
<span class="w">        </span><span class="n">boostrap</span><span class="p">.</span><span class="na">bundles</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">MySubBundle</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p><strong>Before</strong>, all transitive bundles were initialized after root bundles:
<code>MySubBundle.initialize()</code> called after <code>MyBundle.initialize()</code> (and all other root bundles).
At run phase bundles were executed in the same sequence: <code>MyBundle.run()</code> then <code>MySubBundle.run()</code>. </p>
<p>Usually, initialization order does not matter, but, in some cases, it is important to have
the transitive bundle initialized immediately (for example, it could store some important value 
into shared state).</p>
<p>Also, both dropwizard bundles and guice modules immediately initialize transitives.
To unify behavior, transitive guicey bundles now also <strong>initialize immediately</strong>.</p>
<p>So in example above, <code>MySubBundle.initialize()</code> would be called just in time of the
bundle registration <code>boostrap.bundles(new MySubBundle())</code> and, after registration 
root bundle could rely on transitive bundle (initialized) state.</p>
<p>At run phase, the transitive bundle would also be called before the root:
<code>MySubBundle.run()</code> then <code>MyBundle.run()</code>.</p>
<h3 id="listeners-shortcuts">Listeners shortcuts<a class="headerlink" href="#listeners-shortcuts" title="Permanent link">&para;</a></h3>
<p>Add listener registration shortcuts at bundle run:</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">run</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">GuiceyEnvironment</span><span class="w"> </span><span class="n">environment</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">environment</span>
<span class="w">                </span><span class="c1">// executes after application shutdown</span>
<span class="w">                </span><span class="p">.</span><span class="na">onApplicationShutdown</span><span class="p">(</span><span class="n">injector</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">                </span><span class="c1">// jersey startup events and requests listener</span>
<span class="w">                </span><span class="p">.</span><span class="na">listenJersey</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">ApplicationEventListener</span><span class="p">()</span><span class="w"> </span><span class="p">{...})</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Just a useful shortcuts.</p>
<h2 id="hook">Hook<a class="headerlink" href="#hook" title="Permanent link">&para;</a></h2>
<p>Added <code>throws Exception</code> for guicey hook:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">GuiceyConfigurationHook</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">(</span><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">Builder</span><span class="w"> </span><span class="n">builder</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This is not a breaking change: all existing hooks will work (even compiled with
the previous guicey version). Existing runtime exception is re-thrown so even tests,
relying on the exception type or message would not break.
It's even possible to avoid <code>throws Exception</code> in new hooks.</p>
</div>
<p>Avoiding checked exception is especially useful when writing test hooks. </p>
<h2 id="private-guice-modules-support">Private guice modules support<a class="headerlink" href="#private-guice-modules-support" title="Permanent link">&para;</a></h2>
<p><strong>Before</strong> guicey did not try to search extension inside private guice modules. But this
is not quite correct because if extension is declared in private module and it would
be also registered manually, then guicey would create another binding for it, which may
cause conflicts.</p>
<p><strong>Now</strong> guicey analyzes private modules too. For example:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PModule</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">PrivateModule</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">configure</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// ExtImpl is extension (recognition sign absent in interface) </span>
<span class="w">        </span><span class="n">bind</span><span class="p">(</span><span class="n">IExt</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">to</span><span class="p">(</span><span class="n">ExtImpl</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="c1">// extension exposed by interface </span>
<span class="w">        </span><span class="n">expose</span><span class="p">(</span><span class="n">IExt</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">IExt</span><span class="w"> </span><span class="p">{...</span><span class="w"> </span><span class="p">}</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Ext</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">IExt</span><span class="p">,</span><span class="w"> </span><span class="n">Managed</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</code></pre></div>
<p>Guicey would detect that <code>ExtImpl</code> is an extension, and it is available (through exposed interface)
and so register it as an extension.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Guicey rely on extension classes and so it would need direct extension access (to be able to call
<code>Injector.getInstance(ExtImpl.class)</code>). By default, it is not possible (exposed only interface),
but guicey would change private module: it would add an additional <code>expose</code> for <code>ExtImpl</code>.</p>
</div>
<p>Also, as any guicey extension could be disabled, then <code>.disable(ExtImpl.class)</code>
would remove binding inside private module (works only for top-level private modules).</p>
<p>If you'll face any problems with private modules behavior, <strong>please report it</strong>.</p>
<p>Old behavior could be reverted with:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">option</span><span class="p">(</span><span class="n">GuiceyOptions</span><span class="p">.</span><span class="na">AnalyzePrivateGuiceModules</span><span class="p">,</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</code></pre></div>
<h2 id="classpath-scan">Classpath scan<a class="headerlink" href="#classpath-scan" title="Permanent link">&para;</a></h2>
<h3 id="extensions-scan-filters">Extensions scan filters<a class="headerlink" href="#extensions-scan-filters" title="Permanent link">&para;</a></h3>
<p>By default, classpath scanner checks all available classes, and the only way to avoid extension 
recognition is <code>@InvisibleForScanner</code> annotation.</p>
<p>Now custom conditions could be specified:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">autoConfigFilter</span><span class="p">(</span><span class="n">ignoreAnnotated</span><span class="p">(</span><span class="n">Skip</span><span class="p">.</span><span class="na">class</span><span class="p">))</span>
</code></pre></div>
<p>In this example, classes annotated with <code>@Skip</code> would not be recognized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Assumed static import for <code>ClassFilters</code> utility, containing the most common cases.
If required, raw predicate could be used:
<div class="highlight"><pre><span></span><code><span class="p">.</span><span class="na">autoConfigFilter</span><span class="p">(</span><span class="n">cls</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">!</span><span class="n">cls</span><span class="p">.</span><span class="na">isAnnotationPresent</span><span class="p">(</span><span class="n">Skip</span><span class="p">.</span><span class="na">class</span><span class="p">))</span>
</code></pre></div></p>
</div>
<p>It is also possible now to implement spring-like approach when only annotated classes 
are recognized:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">autoConfigFilter</span><span class="p">(</span><span class="n">annotated</span><span class="p">(</span><span class="n">Component</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">Service</span><span class="p">.</span><span class="na">class</span><span class="p">))</span>
</code></pre></div>
<p>Here only extensions annotated with <code>@Component</code> or <code>@Service</code> would be recognized.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This filter affects only extension search: installers and commands search does not use filters
(because it would be confusing and error-prone).</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Multiple filters could be specified:
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">autoConfigFilter</span><span class="p">(</span><span class="n">annotated</span><span class="p">(</span><span class="n">Component</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">Service</span><span class="p">.</span><span class="na">class</span><span class="p">))</span>
<span class="w">    </span><span class="p">.</span><span class="na">autoConfigFilter</span><span class="p">(</span><span class="n">ignoreAnnotated</span><span class="p">(</span><span class="n">Skip</span><span class="p">.</span><span class="na">class</span><span class="p">))</span>
</code></pre></div></p>
</div>
<p>Auto config filter also affects extensions recognition from guice bindings and so
could be used for ignoring extensions from bindings.</p>
<p>It is also possible now to exclude some sub-packages from classpath scan:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">enableAutoConfig</span><span class="p">(</span><span class="s">&quot;com.company.app&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">autoConfigFilter</span><span class="p">(</span><span class="n">ignorePackages</span><span class="p">(</span><span class="s">&quot;com.company.app.internal&quot;</span><span class="p">))</span>
</code></pre></div>
<h3 id="private-extension-classes">Private extension classes<a class="headerlink" href="#private-extension-classes" title="Permanent link">&para;</a></h3>
<p>By default, guicey does not search extensions in protected and package-private classes:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Something</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Ext1</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Managed</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="kd">protected</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Ext2</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Managed</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
<p>Now searching such extensions could be enabled with:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">option</span><span class="p">(</span><span class="n">GuiceyOptions</span><span class="p">.</span><span class="na">ScanProtectedClasses</span><span class="p">,</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
</code></pre></div>
<h2 id="disable-predicate">Disable predicate<a class="headerlink" href="#disable-predicate" title="Permanent link">&para;</a></h2>
<p>Disable predicate is useful for disabling a wide range of extensions:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">disable</span><span class="p">(</span><span class="n">Disables</span><span class="p">.</span><span class="na">inPackage</span><span class="p">(</span><span class="s">&quot;com.company.app.rest.stubs&quot;</span><span class="p">))</span>
</code></pre></div>
<p>But, <strong>before</strong> predicate was called too early: before actual installer is assigned
to the extension item model and so it was impossible to disable extensions by installer.</p>
<p><strong>Now</strong> extensions could be disabled by installer.</p>
<p>For convenience, new installer-related shortcuts added:</p>
<ul>
<li><code>Disables.jerseyExtension()</code></li>
<li><code>Disables.webExtension()</code> (servlets, filters and jersey)</li>
<li><code>Disables.installedBy(...)</code></li>
</ul>
<p>Example usage:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableHook</span>
<span class="kd">static</span><span class="w"> </span><span class="n">GuiceyConfigurationHook</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">builder</span><span class="p">.</span><span class="na">disable</span><span class="p">(</span><span class="n">installedBy</span><span class="p">(</span><span class="n">WebFilterInstaller</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
</code></pre></div>
<p>Also, disable shortcuts for exact items type (<code>Disables.module()</code>, <code>Disabled.extension()</code>, etc.) now raise predicate 
type to simplify chained usage:</p>
<div class="highlight"><pre><span></span><code><span class="n">builder</span><span class="p">.</span><span class="na">disable</span><span class="p">(</span><span class="n">module</span><span class="p">().</span><span class="na">and</span><span class="p">(</span><span class="n">ModuleItemInfo</span><span class="w"> </span><span class="n">mod</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">!</span><span class="w"> </span><span class="n">mod</span><span class="p">.</span><span class="na">isOverriding</span><span class="p">()));</span>
</code></pre></div>
<h2 id="shared-state">Shared state<a class="headerlink" href="#shared-state" title="Permanent link">&para;</a></h2>
<h3 id="state-key-breaking">State key (BREAKING)<a class="headerlink" href="#state-key-breaking" title="Permanent link">&para;</a></h3>
<p>Before, it was recommended to use bundle class as a shared state key,
but it appears to be very confusing.</p>
<p>Now <strong>shared state object class must be used as a key</strong></p>
<p>This affects both state storing:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// before was: put(Bundle.class, new MyState())</span>
<span class="n">state</span><span class="p">.</span><span class="na">put</span><span class="p">(</span><span class="n">MyState</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyState</span><span class="p">());</span>
</code></pre></div>
<p>And access:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// before was: MyState myState = state.get(Bundle.class);</span>
<span class="n">MyState</span><span class="w"> </span><span class="n">myState</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">state</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">MyState</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div>
<p>This way shared state usage becomes type-safe (impossible to use a wrong type for 
the stored object by mistake).</p>
<h3 id="options-accessor">Options accessor<a class="headerlink" href="#options-accessor" title="Permanent link">&para;</a></h3>
<p>Shared state now holds a reference to guicey options values:</p>
<div class="highlight"><pre><span></span><code><span class="n">SharedConfigurationState</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="n">environment</span><span class="p">).</span><span class="na">get</span><span class="p">().</span><span class="na">getOptions</span><span class="p">()</span>
</code></pre></div>
<h3 id="reactive-access">Reactive access<a class="headerlink" href="#reactive-access" title="Permanent link">&para;</a></h3>
<p>Added reactive state access method (action called as soon as value would be set).
This is mostly useful for the main guice bundle: </p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="n">withSharedState</span><span class="p">(</span><span class="n">state</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="n">state</span><span class="p">.</span><span class="na">whenReady</span><span class="p">(</span><span class="n">MyState</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">mystate</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...))</span>
</code></pre></div>
<p><code>whenReady</code> action called either immediately, if value already present, or just after value
would be set. Listener calls could be seen on the new shared state report (same as never called listeners)</p>
<h2 id="test">Test<a class="headerlink" href="#test" title="Permanent link">&para;</a></h2>
<h3 id="disable-managed-lifecycle">Disable managed lifecycle<a class="headerlink" href="#disable-managed-lifecycle" title="Permanent link">&para;</a></h3>
<p>Added ability to disable managed objects lifecycle for lightweight guicey tests:</p>
<p>JUnit 5 extensions:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(..,</span><span class="w"> </span><span class="n">managedLifecycle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(..)</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">.</span><span class="na">disableManagedLifecycle</span><span class="p">()</span>
</code></pre></div>
<p>In this case, start/stop method would not be called for managed objects.
This might be useful for disabling some heavy application initialization logic,
defined in managed objects, but not required in tests.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Application lifecycle will remain: events like <code>onApplicationStartup</code> would still be 
working (and all registered <code>LifeCycle</code> objects would work). Only managed objects ignored.</p>
</div>
<p>Option is also available for core (non-junit) testing support:</p>
<ul>
<li><code>new GuiceyTestSupport().disableManagedLifecycle()</code></li>
<li><code>TestSupport.build(App.class).runCoreWithoutManaged(..)</code></li>
</ul>
<h3 id="manual-configuration-objects">Manual configuration objects<a class="headerlink" href="#manual-configuration-objects" title="Permanent link">&para;</a></h3>
<p>It is now possible to manually construct configuration object instance in
junit5 extension (for both lightweight and full app tests):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(..)</span>
<span class="w">        </span><span class="p">.</span><span class="na">config</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyConfig</span><span class="p">())</span>
<span class="w">        </span><span class="p">...</span>
</code></pre></div>
<p>Or in setup object:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span>
<span class="kd">static</span><span class="w"> </span><span class="o">**</span><span class="n">TestEnvironmentSetup</span><span class="o">**</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ext</span><span class="p">.</span><span class="na">config</span><span class="p">(()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">MyConfig</span><span class="p">())</span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Configuration overrides would not work with manually created configuration objects.
Use configuration modifiers instead.</p>
</div>
<h3 id="config-override-for-a-single-key">Config override for a single key<a class="headerlink" href="#config-override-for-a-single-key" title="Permanent link">&para;</a></h3>
<p>Added config override for a single key-value pair (for the setup object and extension builders):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ext</span><span class="p">.</span><span class="na">configOverride</span><span class="p">(</span><span class="s">&quot;some.key&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;12&quot;</span><span class="p">);</span>
</code></pre></div>
<p>(before, only methods with supplier and multiple keys were available)</p>
<h3 id="configuration-modifiers">Configuration modifiers<a class="headerlink" href="#configuration-modifiers" title="Permanent link">&para;</a></h3>
<p>Dropwizard configuration overrides mechanism is limited (for example, it would not work for a collection property).</p>
<p>Configuration modifier is an alternative mechanism when all changes are performed on
configuration instance. </p>
<p>Modifier could be used as lambda:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(..)</span>
<span class="w">        </span><span class="p">.</span><span class="na">configModifiers</span><span class="p">(</span><span class="n">config</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="na">getSomething</span><span class="p">().</span><span class="na">setFoo</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
<span class="w">        </span><span class="p">...</span>
</code></pre></div>
<p>Or in setup object:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span>
<span class="w">        </span><span class="n">ext</span><span class="p">.</span><span class="na">configModifiers</span><span class="p">(</span><span class="n">config</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">config</span><span class="p">.</span><span class="na">getSomething</span><span class="p">().</span><span class="na">setFoo</span><span class="p">(</span><span class="mi">12</span><span class="p">))</span>
</code></pre></div>
<p>Modifier could be declared in class:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyModifier</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">ConfigModifier</span><span class="o">&lt;</span><span class="n">MyConfig</span><span class="o">&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">modify</span><span class="p">(</span><span class="n">MyConfig</span><span class="w"> </span><span class="n">config</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">config</span><span class="p">.</span><span class="na">getSomething</span><span class="p">().</span><span class="na">setFoo</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="nd">@TestGuiceyApp</span><span class="p">(..,</span><span class="w"> </span><span class="n">configModifiers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MyModifier</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Modifier could be used with both manual configuration or usual (yaml) configuration.
Configuration modifiers also could be used together with configuration overrides.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Limitation</p>
<p>Configuration modifiers are called after dropwizard logging configuration,
so logging is the only thing that can't be configured (use configuration overrides for logging)</p>
</div>
<p>Configuration overrides are also available in core test extensions:</p>
<ul>
<li>Commands runner: <code>TestSupport.buildCommandRunner(..).configModifiers(...)</code> </li>
<li>Raw test support builder: <code>TestSupport.build(..).configModifiers(...)</code></li>
<li><code>GuiceyTestSupport.configModifiers(..)</code></li>
<li>For <code>DropwizardTestSupport</code> custom command must be used to support modifiers: 
    <code>ConfigOverrideUtils.buildCommandFactory</code></li>
</ul>
<h3 id="custom-configuration-block">Custom configuration block<a class="headerlink" href="#custom-configuration-block" title="Permanent link">&para;</a></h3>
<p>To simplify field-based declarations, custom (free) block added (<code>.with()</code>):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RegisterExtension</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(..)</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span>
<span class="w">               </span><span class="n">builder</span><span class="p">.</span><span class="na">configOverrides</span><span class="p">(</span><span class="s">&quot;foo.bar&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">12</span><span class="p">);</span><span class="w"> </span>
<span class="w">            </span><span class="p">}</span>
<span class="w">        </span><span class="p">})</span><span class="w"> </span>
</code></pre></div>
<p>And the same for setup objects:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="p">...</span>
<span class="w">        </span><span class="p">.</span><span class="na">with</span><span class="p">(</span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="p">...</span>
<span class="w">        </span><span class="p">})</span><span class="w"> </span>
</code></pre></div>
<h3 id="debug-option-evolution">Debug option evolution<a class="headerlink" href="#debug-option-evolution" title="Permanent link">&para;</a></h3>
<p>Existing junit extensions debug mechanism was evolved: </p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(..,</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
</code></pre></div>
<h4 id="extensions-time">Extensions time<a class="headerlink" href="#extensions-time" title="Permanent link">&para;</a></h4>
<p>To simplify slow tests (slowness) investigations, guicey now measures and prints extensions time.</p>
<p>For example, test with application started in beforeAll, with two test methods
(same app for both tests):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PerformanceLogTest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test1</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test2</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>\\\------------------------------------------------------------/ test instance = 1595d2b2 /
Guicey time after [Before each] of PerformanceLogTest#test1(): 1204 ms

    [Before all]                       : 1204 ms
        Guicey fields search               : 2.03 ms
        Guicey hooks registration          : 0.02 ms
        Guicey setup objects execution     : 1.92 ms
        DropwizardTestSupport creation     : 1.47 ms
        Application start                  : 1172 ms

    [Before each]                      : 0.46 ms
        Guice fields injection             : 0.19 ms


\\\------------------------------------------------------------/ test instance = 45554613 /
Guicey time after [Before each] of PerformanceLogTest#test2(): 1205 ms ( + 0.33 ms)

    [Before each]                      : 0.69 ms ( + 0.23 ms)
        Guice fields injection             : 0.36 ms ( + 0.17 ms)

    [After each]                       : 0.10 ms


\\\---------------------------------------------------------------------------------------------
Guicey time after [After all] of PerformanceLogTest: 1207 ms ( + 2.15 ms)

    [After each]                       : 0.11 ms ( + 0.01 ms)

    [After all]                        : 2.14 ms
        Application stop                   : 1.72 ms
</code></pre></div>
<p>There are three reports:</p>
<ol>
<li>Before first test method (see guicey extension startup time)</li>
<li>Before the second test method (see guicey time for the second method only)</li>
<li>After all (cleanup time)</li>
</ol>
<p>Only the first report shows all recorded times, next reports only mention time increase.
For example, the second report mentions only <code>Guice fields injection             : 0.36 ms ( + 0.17 ms)</code>
Meaning guicey perform fields injection just before the second test, spent 0.17 ms on it 
(overall injection time for two injections is 0.36 ms) </p>
<h4 id="updated-declarations-report">Updated declarations report<a class="headerlink" href="#updated-declarations-report" title="Permanent link">&para;</a></h4>
<p>All declared setup objects and hooks now showed with a (declaration) source reference (where possible).
Simplified report for lambdas (was not very readable before).</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test2</span><span class="w"> </span><span class="kd">extends</span><span class="w"> </span><span class="n">Base</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@RegisterExtension</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="w"> </span><span class="n">app</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestGuiceyAppExtension</span><span class="p">.</span><span class="na">forApp</span><span class="p">(</span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">setup</span><span class="p">(</span><span class="n">Ext1</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">Ext2</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">            </span><span class="p">.</span><span class="na">setup</span><span class="p">(</span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">null</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Ext3</span><span class="p">())</span>
<span class="w">            </span><span class="p">.</span><span class="na">debug</span><span class="p">()</span>
<span class="w">            </span><span class="p">.</span><span class="na">create</span><span class="p">();</span>

<span class="w">    </span><span class="nd">@EnableSetup</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">ext1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="nd">@EnableSetup</span>
<span class="w">    </span><span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">ext2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>Guicey test extensions (Test2.):

    Setup objects = 
        Ext1                            @RegisterExtension.setup(class)                    at r.v.d.g.t.j.d.SetupObjectsLogTest.(SetupObjectsLogTest.java:102)
        Ext2                            @RegisterExtension.setup(class)                    at r.v.d.g.t.j.d.SetupObjectsLogTest.(SetupObjectsLogTest.java:102)
        &lt;lambda&gt;                        @RegisterExtension.setup(obj)                      at r.v.d.g.t.j.d.SetupObjectsLogTest.(SetupObjectsLogTest.java:103)
        Ext3                            @RegisterExtension.setup(obj)                      at r.v.d.g.t.j.d.SetupObjectsLogTest.(SetupObjectsLogTest.java:103)
        &lt;lambda&gt;                        @EnableSetup Base#base1                            at r.v.d.g.t.j.d.SetupObjectsLogTest$Base#base1
        &lt;lambda&gt;                        @EnableSetup Base#base2                            at r.v.d.g.t.j.d.SetupObjectsLogTest$Base#base2
        &lt;lambda&gt;                        @EnableSetup Test2#ext1                            at r.v.d.g.t.j.d.SetupObjectsLogTest$Test2#ext1
        &lt;lambda&gt;                        @EnableSetup Test2#ext2                            at r.v.d.g.t.j.d.SetupObjectsLogTest$Test2#ext2
</code></pre></div>
<h3 id="inject-test-fields-once">Inject test fields once<a class="headerlink" href="#inject-test-fields-once" title="Permanent link">&para;</a></h3>
<p>By default, guicey would inject test field values before every test method, even if the same
test instance used (<code>TestInstance.Lifecycle.PER_CLASS</code>). This should not be a problem
in the majority of cases because guice injection takes very little time.
Also, it is important for prototype beans, which will be refreshed for each test.</p>
<p>Now it is possible to inject fields just once:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">injectOnce</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="c1">// by default new test instance used for each method, so injectOnce option would be useless </span>
<span class="nd">@TestInstance</span><span class="p">(</span><span class="n">TestInstance</span><span class="p">.</span><span class="na">Lifecycle</span><span class="p">.</span><span class="na">PER_CLASS</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">PerClassInjectOnceGuiceyTest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="n">Bean</span><span class="w"> </span><span class="n">bean</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">test1</span><span class="p">()</span><span class="w"> </span><span class="p">{..}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="nf">test2</span><span class="p">()</span><span class="w"> </span><span class="p">{..}</span>
<span class="p">}</span>
</code></pre></div>
<p>In this case, the same test instance used for both methods (<code>Lifecycle.PER_CLASS</code>)
and <code>Bean bean</code> field would be injected just once (<code>injectOnce = true</code>)</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>To check the actual fields injection time enable debug (<code>debug = true</code>) and
it will print injection time before each test method:
<div class="highlight"><pre><span></span><code>[Before each]                      : 2.05 ms
    Guice fields injection             : 1.58 ms    
</code></pre></div></p>
</div>
<h3 id="setup-objects-evolution">Setup objects evolution<a class="headerlink" href="#setup-objects-evolution" title="Permanent link">&para;</a></h3>
<p>Added <code>throws Exception</code> in setup object method:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">GuiceyEnvironmentSetup</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="n">TestExtension</span><span class="w"> </span><span class="n">extension</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This is not a breaking change: all existing setup objects will work (even compiled with
the previous guicey version). Existing runtime exception is re-thrown so even tests,
relying on the exception type or message would not break.
It's even possible to avoid <code>throws Exception</code> in new objects.</p>
</div>
<p>With all extensions below, setup objects could completely replace some native junit extensions:
meaning it would be simpler now to implement just a setup object instead of separate junit 
extension implementation.</p>
<h4 id="junit-context">Junit context<a class="headerlink" href="#junit-context" title="Permanent link">&para;</a></h4>
<p>Junit context is now directly accessible in builder:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MyExt</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">GuiceyEnvironmentSetup</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="n">TestExtension</span><span class="w"> </span><span class="n">extension</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ExtensionContext</span><span class="w"> </span><span class="n">context</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extension</span><span class="p">.</span><span class="na">getJunitContext</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Also, <code>ExtensionContext</code> could be injected as test method parameter:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@BeforeEach</span>
<span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">(</span><span class="n">ExtensionContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="p">...</span>
<span class="p">}</span>
</code></pre></div>
<h4 id="lifecycle-listeners">Lifecycle listeners<a class="headerlink" href="#lifecycle-listeners" title="Permanent link">&para;</a></h4>
<p>Added lifecycle listener interface, representing junit phases (before/after) and tested 
application (started/stopped):</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">interface</span> <span class="nc">TestExecutionListener</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">starting</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">started</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">beforeAll</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">beforeEach</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afterEach</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">afterAll</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">stopping</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="w">    </span><span class="k">default</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">stopped</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{}</span>
<span class="p">}</span>
</code></pre></div>
<p><code>EventContext</code> provides access for guice injector, DropwizardTestSupport object and junit 5 context.</p>
<p>Raw listener is useful for large setup objects:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MySetup</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="p">,</span><span class="w"> </span><span class="n">TestExecutionListener</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="n">TestExtension</span><span class="w"> </span><span class="n">extension</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">extension</span><span class="p">.</span><span class="na">listen</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">started</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// something</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>For field declarations (lambda-based), special individual shortcuts are available:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableSetup</span>
<span class="kd">static</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="n">setup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ext</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">ext</span>
<span class="w">        </span><span class="p">.</span><span class="na">onApplicationStarting</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="p">.</span><span class="na">onApplicationStart</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="p">.</span><span class="na">onBeforeAll</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="p">.</span><span class="na">onBeforeEach</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="p">.</span><span class="na">onAfterEach</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="p">.</span><span class="na">onAfterAll</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="p">.</span><span class="na">onApplicationStopping</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
<span class="w">        </span><span class="p">.</span><span class="na">onApplicationStop</span><span class="p">(</span><span class="n">event</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p">...)</span>
</code></pre></div>
<h4 id="extension-debug">Extension debug<a class="headerlink" href="#extension-debug" title="Permanent link">&para;</a></h4>
<p>For simplicity, setup object could re-use guicey extension debug trigger to 
print additional data:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">App</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">stup</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MySetup</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">MySetup</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="p">,</span><span class="w"> </span><span class="n">TestExecutionListener</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="n">TestExtension</span><span class="w"> </span><span class="n">extension</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">extension</span><span class="p">.</span><span class="na">listen</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>

<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">extension</span><span class="p">.</span><span class="na">isDebug</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Debug info: ...&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">started</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">EventContext</span><span class="w"> </span><span class="n">context</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">context</span><span class="p">.</span><span class="na">isDebug</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">System</span><span class="p">.</span><span class="na">out</span><span class="p">.</span><span class="na">println</span><span class="p">(</span><span class="s">&quot;Debug info: ...&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<h3 id="annotated-fields-search-api">Annotated fields search API<a class="headerlink" href="#annotated-fields-search-api" title="Permanent link">&para;</a></h3>
<p>Added <code>.findAnnotatedFields()</code> method to search annotated test fields.</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
<span class="w">     </span><span class="nd">@MyAnn</span>
<span class="w">     </span><span class="n">Base</span><span class="w"> </span><span class="n">field</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">CustomFieldsSupport</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">TestEnvironmentSetup</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">Object</span><span class="w"> </span><span class="nf">setup</span><span class="p">(</span><span class="n">TestExtension</span><span class="w"> </span><span class="n">extension</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Exception</span><span class="w"> </span><span class="p">{</span>

<span class="w">        </span><span class="n">List</span><span class="o">&lt;</span><span class="n">AnnotatedField</span><span class="o">&lt;</span><span class="n">MyAnn</span><span class="p">,</span><span class="w"> </span><span class="n">Base</span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">fields</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">extension</span>
<span class="w">                </span><span class="p">.</span><span class="na">findAnnotatedFields</span><span class="p">(</span><span class="n">MyAnn</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">Base</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
</code></pre></div>
<p>Out of the box, API provides many checks, like required base class (it could be Object to avoid check):
if annotated field type is different - error would be thrown.</p>
<p>Returned object is also abstraction: <code>AnnotatedField</code> - it simplifies working with filed value,
plus contains additional checks. </p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This api is not generalized (target usage with junit only) because it uses
junit annotations search utility internally.</p>
</div>
<p>Added <code>AnnotatedTestFieldSetup</code> base class which implements base fields workflow
(including proper nested tests support).</p>
<p>All new field extensions (see below) are using this base class. Using them as 
implementation examples, it should be pretty simple to add other field-based test
extensions.</p>
<h3 id="auto-lookup">Auto lookup<a class="headerlink" href="#auto-lookup" title="Permanent link">&para;</a></h3>
<p>Custom <code>TestEnvironmentSetup</code> objects could be loaded automatically now 
with service loader. New default extensions already use service loader.</p>
<p>To enable automatic loading of custom extension add: 
<code>META-INF/services/ru.vyarus.dropwizard.guice.test.jupiter.env.TestEnvironmentSetup</code></p>
<p>And put there required setup object classes (one per line), like this:</p>
<div class="highlight"><pre><span></span><code>ru.vyarus.dropwizard.guice.test.jupiter.ext.log.RecordedLogsSupport
ru.vyarus.dropwizard.guice.test.jupiter.ext.rest.RestStubSupport
ru.vyarus.dropwizard.guice.test.jupiter.ext.stub.StubsSupport
ru.vyarus.dropwizard.guice.test.jupiter.ext.mock.MocksSupport
</code></pre></div>
<p>Now, when setup objects have more abilities, more custom test extensions could be implemented
(see new filed-based extensions below). Automatic installation for such 3<sup>rd</sup> party
extensions (using service loader) should simplify overall usage.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Service loading for extensions could be disabled (together with new default extensions):
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(..,</span><span class="w"> </span><span class="n">useDefaultExtensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</code></pre></div></p>
</div>
<h3 id="new-test-extensions">New test extensions<a class="headerlink" href="#new-test-extensions" title="Permanent link">&para;</a></h3>
<p>All new extensions are enabled by default: if any of them will cause any problems, 
please report. New extensions could be disabled with (this will also switch off 
an extension lookup mechanism) </p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(..,</span><span class="w"> </span><span class="n">useDefaultExtensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span><span class="p">)</span>
</code></pre></div>
<p>After disabling, some extensions could be registered manually (they are all just setup objects). </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>All recognized extension fields would be printed to console when guicey extension debug 
is enabled (<code>debug = true</code>).</p>
</div>
<p>New extensions:</p>
<ul>
<li>Stubs (with deep injection)</li>
<li>Mockito mocks (with deep injection)</li>
<li>Mockito spies </li>
<li>Guice bean calls tracker (method arguments and return value captor + time measure)</li>
<li>Logs test support</li>
<li>Lightweight REST tests support</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The core logic for all extensions is implemented as guicey hook. These hooks are generic and 
could be used without junit (see <a href="../../guide/test/general/general/">general docs</a>) </p>
</div>
<h4 id="stubs">Stubs<a class="headerlink" href="#stubs" title="Permanent link">&para;</a></h4>
<p>Stub is a (manual) replacement for the real bean. 
For example, suppose application has a <code>BillingService</code>, but for tests you 
want to replace it with a simple (no-external-communication) implementation:
<code>StubBillingService extends BillingService</code>.</p>
<p>Stubs declared in test class with a new <code>@StubBean</code> annotation:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@StubBean</span><span class="p">(</span><span class="n">BillingService</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="n">StubBillingService</span><span class="w"> </span><span class="n">stub</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<p>In this example, stub is instantiated with guice (but you could do it manually) and 
override <code>BillingService</code> injection in guice context (using guice modules override).
That means that stub would not only be available in the annotated field, but all guice 
beans, requiring <code>BillingService</code> would actually receive stub instance instead of it.</p>
<p>If you try to declare service injection in test:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Inject</span>
<span class="n">BillingService</span><span class="w"> </span><span class="n">billingService</span><span class="p">;</span>
</code></pre></div>
<p>You'll see that it's the same instance as a stub.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a stub object injected into guice context, which by default used "per class",
the same stub instance would be used for all methods in test (of course, if guice extension
not declared "per method"). A stub object could implement special interface <code>StubLifecycle</code>
(with before/after methods) which would be called before and after each test method
(could be used to reset state).</p>
</div>
<h4 id="mocks">Mocks<a class="headerlink" href="#mocks" title="Permanent link">&para;</a></h4>
<p>Requires mockito dependency (version not required if dropwizard (or guicey) BOM used):</p>
<div class="highlight"><pre><span></span><code><span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;org.mockito:mockito-core&#39;</span>
</code></pre></div>
<p>Essentially, mocks are automatic stubs with the ability to dynamically declare method behavior.</p>
<p>Mocks declared with a <code>@MockBean</code> annotation:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(...)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@MockBean</span>
<span class="w">    </span><span class="n">MyService</span><span class="w"> </span><span class="n">mock</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">when</span><span class="p">(</span><span class="n">mock</span><span class="p">.</span><span class="na">foo</span><span class="p">()).</span><span class="na">thenReturn</span><span class="p">(</span><span class="s">&quot;something&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Mock instance created automatically (<code>Mockito.mock(MyService.class)</code>) and override
<code>MyService</code> declaration (using guice modules override).</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The main difference with mockito junit extension is that mock instance would be injected
in all places using mocked service (replace real service in the entire application)</p>
</div>
<p>Mock behavior could be declared in test setup method or just before usage in test method.</p>
<p>If you try to declare service injection in test:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Inject</span>
<span class="n">MyService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span>
</code></pre></div>
<p>You'll see that it's the same instance as a mock.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a mock object injected into guice context, which by default used "per class",
the same stub instance would be used for all methods in test (of course, if guice extension
not declared "per method"). A mock would be reset (<code>Mockito.reset(mock)</code>) automatically
after each test method.</p>
</div>
<p>Mockito provides a mock usage report (<code>Mockito.mockingDetails(value).printInvocations()</code>), 
which could be enabled with <code>@MockBean(printSummary = true)</code> (report shown after each test method):</p>
<div class="highlight"><pre><span></span><code>\\\------------------------------------------------------------/ test instance = 6d420cdd /
@MockBean stats on [After each] for MockSummaryTest$Test1#test():

    [Mockito] Interactions of: Mock for Service, hashCode: 1340267778
     1. service.foo(1);
      -&gt; at ru.vyarus.dropwizard.guice.test.jupiter.setup.mock.MockSummaryTest$Test1.test(MockSummaryTest.java:55)
       - stubbed -&gt; at ru.vyarus.dropwizard.guice.test.jupiter.setup.mock.MockSummaryTest$Test1.setUp(MockSummaryTest.java:50)
</code></pre></div>
<h4 id="spies">Spies<a class="headerlink" href="#spies" title="Permanent link">&para;</a></h4>
<p>Requires mockito dependency (version not required if dropwizard (or guicey) BOM used):</p>
<div class="highlight"><pre><span></span><code><span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;org.mockito:mockito-core&#39;</span>
</code></pre></div>
<p>Spy is a partial mock: real service instance is proxied. Spies could be used to track
instance calls or to modify some method behavior.</p>
<p>Spies declared with a <code>@SpyBean</code> annotation:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(...)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@SpyBean</span>
<span class="w">    </span><span class="n">MyService</span><span class="w"> </span><span class="n">spy</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// just for example (not required)</span>
<span class="w">    </span><span class="nd">@Inject</span><span class="w"> </span>
<span class="w">    </span><span class="n">MyService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span>

<span class="w">    </span><span class="c1">// optional</span>
<span class="w">    </span><span class="nd">@BeforeEach</span>
<span class="w">    </span><span class="kt">void</span><span class="w"> </span><span class="nf">setUp</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// important declaration reversed (otherwise real method is called during declaration)! </span>
<span class="w">        </span><span class="n">doReturn</span><span class="p">(</span><span class="mi">12</span><span class="p">).</span><span class="na">when</span><span class="p">(</span><span class="n">spy</span><span class="p">).</span><span class="na">foo</span><span class="p">();</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// calling methods on injected service to show that it is also a spy</span>
<span class="w">        </span><span class="c1">// (normally spies would be called indirectly (by other beans))</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="na">foo</span><span class="p">());</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">service</span><span class="p">.</span><span class="na">bar</span><span class="p">(</span><span class="mi">1</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// foo() (mocked method) called once</span>
<span class="w">        </span><span class="n">Mockito</span><span class="p">.</span><span class="na">verify</span><span class="p">(</span><span class="n">spy</span><span class="p">,</span><span class="w"> </span><span class="n">Mockito</span><span class="p">.</span><span class="na">times</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="na">foo</span><span class="p">();</span>
<span class="w">        </span><span class="c1">// bar(1) called once </span>
<span class="w">        </span><span class="n">Mockito</span><span class="p">.</span><span class="na">verify</span><span class="p">(</span><span class="n">spy</span><span class="p">,</span><span class="w"> </span><span class="n">Mockito</span><span class="p">.</span><span class="na">times</span><span class="p">(</span><span class="mi">1</span><span class="p">)).</span><span class="na">bar</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Spy instance created automatically (<code>Mockito.spy(service)</code>) and override
<code>MyService</code> declaration (using guice AOP).</p>
<p>In the example above, method <code>foo()</code> is mocked and method <code>bar(..)</code> is not (original service method called).</p>
<div class="admonition important">
<p class="admonition-title">Limitation</p>
<p>Spy objects would <strong>work only for beans, created by guice</strong>. 
Spy creation requires original service instance, and so guice AOP used to 
intercept call the original bean, create spy dynamically, and redirect calls
to the spy object.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>As a spy object tied with guice context, which by default used "per class",
the same spy instance would be used for all methods in test (of course, if guice extension
not declared "per method"). A spy would be reset (<code>Mockito.reset(mock)</code>) automatically
after each test method.</p>
</div>
<p>Same as for mocks, a usage report could be printed after each test <code>@SpyBean(printSummary = true)</code></p>
<div class="highlight"><pre><span></span><code>\\\------------------------------------------------------------/ test instance = 285bf5ac /
@SpyBean stats on [After each] for SpySummaryTest$Test1#test():

    [Mockito] Interactions of: ru.vyarus.dropwizard.guice.test.jupiter.setup.spy.SpySummaryTest$Service$$EnhancerByGuice$$60e90c@40fe8fd5
     1. spySummaryTest$Service$$EnhancerByGuice$$60e90c.foo(
        1
    );
      -&gt; at ru.vyarus.dropwizard.guice.test.jupiter.setup.spy.SpySummaryTest$Test1.test(SpySummaryTest.java:50)
</code></pre></div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Spies (in some cases) are not very easy to use for tracking method arguments and return values.
<code>@TrackBean</code> extension could be more useful for actual values tracking
(could be used together with spies or mocks). </p>
<p>Example of how to intercept method call result:
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">static</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ResultCaptor</span><span class="o">&lt;</span><span class="n">T</span><span class="o">&gt;</span><span class="w"> </span><span class="kd">implements</span><span class="w"> </span><span class="n">Answer</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">private</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">;</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">getResult</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="nd">@Override</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">T</span><span class="w"> </span><span class="nf">answer</span><span class="p">(</span><span class="n">InvocationOnMock</span><span class="w"> </span><span class="n">invocationOnMock</span><span class="p">)</span><span class="w"> </span><span class="kd">throws</span><span class="w"> </span><span class="n">Throwable</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">T</span><span class="p">)</span><span class="w"> </span><span class="n">invocationOnMock</span><span class="p">.</span><span class="na">callRealMethod</span><span class="p">();</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">result</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>

<span class="n">ResultCaptor</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span><span class="w"> </span><span class="n">resultCaptor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">ResultCaptor</span><span class="o">&lt;&gt;</span><span class="p">();</span>
<span class="n">Mockito</span><span class="p">.</span><span class="na">doAnswer</span><span class="p">(</span><span class="n">resultCaptor</span><span class="p">).</span><span class="na">when</span><span class="p">(</span><span class="n">spy</span><span class="p">).</span><span class="na">foo</span><span class="p">();</span>

<span class="n">Assertions</span><span class="p">.</span><span class="na">assertThat</span><span class="p">(</span><span class="n">resultCaptor</span><span class="p">.</span><span class="na">getResult</span><span class="p">()).</span><span class="na">isEqualTo</span><span class="p">(</span><span class="s">&quot;something&quot;</span><span class="p">);</span>
</code></pre></div></p>
</div>
<h4 id="trackers">Trackers<a class="headerlink" href="#trackers" title="Permanent link">&para;</a></h4>
<p>Tracker extension was added to simplify checking guice beans method arguments and result value,
because mockito spies are not very handy (see example above).</p>
<p>Tracker is declared with <code>@TrackBean</code>, but field type must be <code>Tracker&lt;Service&gt;</code> with target
service, declared as generic:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@TrackBean</span>
<span class="w">    </span><span class="n">Tracker</span><span class="o">&lt;</span><span class="n">MyService</span><span class="o">&gt;</span><span class="w"> </span><span class="n">tracker</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="n">MyService</span><span class="w"> </span><span class="n">service</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// call</span>
<span class="w">        </span><span class="n">service</span><span class="p">.</span><span class="na">foo</span><span class="p">(</span><span class="s">&quot;something&quot;</span><span class="p">);</span>

<span class="w">        </span><span class="n">MethodTrack</span><span class="w"> </span><span class="n">track</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">serviceTracker</span><span class="p">.</span><span class="na">getLastTrack</span><span class="p">();</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">track</span><span class="p">.</span><span class="na">toString</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="s">&quot;foo(\&quot;something\&quot;)&quot;</span><span class="p">));</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;something&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">track</span><span class="p">.</span><span class="na">getArguments</span><span class="p">()</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="p">);</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertNull</span><span class="p">(</span><span class="n">track</span><span class="p">.</span><span class="na">getResult</span><span class="p">());</span>

<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w"> </span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Limitation</p>
<p>Trackers implemented with guice AOP and so would <strong>work only for beans, created by guice</strong>. </p>
</div>
<p>As method arguments (and return value) could contain mutable objects (which would lost 
the original state after several method calls), the tracker keeps both 
raw object version and string version: <code>getRawResult()</code> and <code>getResult()</code>,
<code>getRawArguments()</code> and <code>getArguments()</code>. </p>
<p>Additionally, there are quoted versions: <code>getQuatedResult()</code> and <code>getQuatedArguments()</code>.
These methods are the same as string methods, but all strings are in quotes to clearly see
string bounds (quoted versions useful for console printing)</p>
<p>When too many method calls are tracked, keeping raw objects might lead to a waste of memeory,
in this case only string values could be preserved: <code>@TrackBean(keepRawObjects = false)</code></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>By default, tracker data would reset after each test method. 
Use <code>@TrackBean(autoRest = false)</code> to keep all data.</p>
<p>Tracked data could be reset manually at any time with: <code>tracker.clear()</code></p>
</div>
<h5 id="searching">Searching<a class="headerlink" href="#searching" title="Permanent link">&para;</a></h5>
<p>All recorded method calls could be obtained with <code>List&lt;MethodTrack&gt; tracks = tracker.getTracks()</code>.
If there was just one call: <code>MethodTrack track = tracker.getLastTrack()</code></p>
<p>In the case of many recorded executions, search could be used:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// search by method (any argument value)</span>
<span class="n">tracks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tracker</span><span class="p">.</span><span class="na">findTracks</span><span class="p">(</span><span class="n">mock</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">when</span><span class="p">(</span>
<span class="w">               </span><span class="n">mock</span><span class="p">.</span><span class="na">foo</span><span class="p">(</span><span class="n">Mockito</span><span class="p">.</span><span class="na">anyInt</span><span class="p">()))</span>
<span class="w">         </span><span class="p">);</span>

<span class="c1">// search methods with exact argument </span>
<span class="n">tracks</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tracker</span><span class="p">.</span><span class="na">findTracks</span><span class="p">(</span><span class="n">mock</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">when</span><span class="p">(</span>
<span class="w">               </span><span class="n">mock</span><span class="p">.</span><span class="na">foo</span><span class="p">(</span><span class="n">Mockito</span><span class="p">.</span><span class="na">intThat</span><span class="p">(</span><span class="n">argument</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">argument</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="p">)))</span>
<span class="w">        </span><span class="p">);</span>
</code></pre></div>
<p>This method uses Mockito stubbing abilities for search criteria declaration:
easy to use and type-safe search.</p>
<h5 id="performance-metrics">Performance metrics<a class="headerlink" href="#performance-metrics" title="Permanent link">&para;</a></h5>
<p>There is a trace mode printing all method calls into console: <code>@TrackBean(trace = true)</code>:</p>
<div class="highlight"><pre><span></span><code>\\\---[Tracker&lt;Service&gt;] 0.11 ms      &lt;@71370fec&gt; .foo(1) = &quot;1 call&quot;
</code></pre></div>
<p>Shows: instance hash, execution time, arguments and return value.</p>
<p>By default, tracker would only log executions for slow methods (more than 5 seconds):</p>
<div class="highlight"><pre><span></span><code>WARN  [2025-04-01 09:22:28,965] ru.vyarus.dropwizard.guice.test.jupiter.ext.track.Tracker: 
\\\---[Tracker&lt;Service&gt;] 2.07 ms      &lt;@53aa2fc9&gt; .foo() = &quot;foo&quot;
</code></pre></div>
<p>Note that warning is printed with a logger, and not as direct console output like trace.
Slow methods configuration: <code>@TrackBean(slowMethods = 5, slowMethodsUnit = ChronoUnit.SECONDS)</code>
(<code>0</code> value to disable warnings).</p>
<p>When guice extension debug is enabled (<code>@TestGuiceyApp(..., debug = true)</code>), a performance report
for all registered tracker objects would be printed:</p>
<div class="highlight"><pre><span></span><code>\\\------------------------------------------------------------/ test instance = 2bbb44da /
Trackers stats (sorted by median) for TrackerSimpleTest#testTracker():

    [service]                                [method]                                           [calls]    [fails]    [min]      [max]      [median]   [75%]      [95%]     
    Service                                  foo(int)                                           3          0          0.011 ms   0.161 ms   0.151 ms   0.161 ms   0.161 ms  
    Service                                  bar(int)                                           1          0          0.066 ms   0.066 ms   0.066 ms   0.066 ms   0.066 ms  
</code></pre></div>
<p>The report use dropwizard metrics to count percentiles. This is required to collect
more informative data when trying to use trackers for performance testing - 
due to jvm warm-up first executions would be much slower, but percentiles should
show more correct values (closer to hot execution). </p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>For each tracker, an individual report could be activated with: <code>@TrackBean(printSummary = true)</code>
This report does not depend on the extension debug flag. </p>
</div>
<p>The summary report also shows the number of service instances involved in stats (in the example 
trace was enabled for clarity):</p>
<div class="highlight"><pre><span></span><code>\\\---[Tracker&lt;Service&gt;] 0.28 ms      &lt;@6707a4bf&gt; .foo(1) = &quot;foo1&quot;
\\\---[Tracker&lt;Service&gt;] 0.007 ms     &lt;@79d3473e&gt; .foo(2) = &quot;foo2&quot;

\\\------------------------------------------------------------/ test instance = 51f18e31 /
Tracker&lt;Service&gt; stats (sorted by median) for ReportForMultipleInstancesTest$Test1#testTracker():

    [service]                                [method]                                           [calls]    [fails]    [min]      [max]      [median]   [75%]      [95%]     
    Service                                  foo(int)                                           2 (2)      0          0.007 ms   0.281 ms   0.281 ms   0.281 ms   0.281 ms  
</code></pre></div>
<p>Note different instances in trace (<code>&lt;@6707a4bf&gt;</code>, <code>&lt;@79d3473e&gt;</code>) and instances count in calls column: <code>2 (2)</code></p>
<p>Method stats (summary of all collected executions for method) could also be used for assertions:</p>
<div class="highlight"><pre><span></span><code><span class="n">TrackerStats</span><span class="w"> </span><span class="n">stats</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tracker</span><span class="p">.</span><span class="na">getStats</span><span class="p">();</span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">stats</span><span class="p">.</span><span class="na">getMethods</span><span class="p">().</span><span class="na">size</span><span class="p">());</span>

<span class="n">MethodSummary</span><span class="w"> </span><span class="n">summary</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">stats</span><span class="p">.</span><span class="na">getMethods</span><span class="p">().</span><span class="na">get</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span><span class="na">getMethod</span><span class="p">().</span><span class="na">getName</span><span class="p">());</span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="n">Service</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span><span class="na">getService</span><span class="p">());</span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span><span class="na">getTracks</span><span class="p">());</span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span><span class="na">getErrors</span><span class="p">());</span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">summary</span><span class="p">.</span><span class="na">getMetrics</span><span class="p">().</span><span class="na">getValues</span><span class="p">().</span><span class="na">length</span><span class="p">);</span>
<span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">summary</span><span class="p">.</span><span class="na">getMetrics</span><span class="p">().</span><span class="na">getMin</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1000</span><span class="p">);</span>
</code></pre></div>
<h4 id="rest-stubs">REST stubs<a class="headerlink" href="#rest-stubs" title="Permanent link">&para;</a></h4>
<p>Guicey provides lightweight REST testing (the same as <a href="https://www.dropwizard.io/en/stable/manual/testing.html#testing-resources">dropwizard resource testing support</a>,
but with guicey-specific features).
Such tests would not start web container: all rest calls are simulated (but still, it tests every part of resource execution).</p>
<p>Lightweight REST could be declared with <code>@StubRest</code> annotation under <code>@TestGuiceyApp</code> extension:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(...)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@StubRest</span>
<span class="w">    </span><span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rest</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;something&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">);</span>

<span class="w">        </span><span class="n">WebApplicationException</span><span class="w"> </span><span class="n">ex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertThrows</span><span class="p">(</span><span class="n">WebApplicationException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">                </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">rest</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;error message&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ex</span><span class="p">.</span><span class="na">getResponse</span><span class="p">().</span><span class="na">readEntity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Extension naming is not quite correct: it is not a stub, but real application resources are used.
The word "stub" used to highlight the fact of incomplete startup: only rest without web.</p>
</div>
<p>By default, all declared resources would be started with all existing jersey extensions
(filters, exception mappers, etc.). <strong>Servlets and http filters are not started</strong> 
(guicey disables all web extensions to avoid their (confusing) appearance in console)</p>
<h5 id="selecting-resources">Selecting resources<a class="headerlink" href="#selecting-resources" title="Permanent link">&para;</a></h5>
<p>Real tests usually require just one resource (to be tested):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@StubRest</span><span class="p">(</span><span class="n">MyResource</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
</code></pre></div>
<p>This way only one resource would be started (and all resources directly registered in 
application, not as guicey extension). All jersey extensions will remain.</p>
<p>Or a couple of resources:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@StubRest</span><span class="p">({</span><span class="n">MyResource</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">MyResource2</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
</code></pre></div>
<p>Or you may disable some resources:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@StubRest</span><span class="p">(</span><span class="n">disableResources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="n">MyResource2</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">MyResource3</span><span class="p">.</span><span class="na">class</span><span class="p">})</span>
<span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
</code></pre></div>
<h5 id="disabling-jersey-extensions">Disabling jersey extensions<a class="headerlink" href="#disabling-jersey-extensions" title="Permanent link">&para;</a></h5>
<p>Often jersey extensions, required for the final application, make complications for testing.</p>
<p>For example, exception mapper: dropwizard register default exception mapper which
returns only the error message, instead of actual exception (and so sometimes we can't check the real cause).</p>
<p><code>disableDropwizardExceptionMappers = true</code> disables extensions, registered by dropwizard.</p>
<p>When default exception mapper enabled, resource throwing runtime error would return:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/some/&quot;</span><span class="p">)</span>
<span class="nd">@Produces</span><span class="p">(</span><span class="s">&quot;application/json&quot;</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">ErrorResource</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@GET</span>
<span class="w">    </span><span class="nd">@Path</span><span class="p">(</span><span class="s">&quot;/error&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="nf">get</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">throw</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">(</span><span class="s">&quot;error&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span><span class="w">    </span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@StubRest</span>
<span class="w">    </span><span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">WebApplicationException</span><span class="w"> </span><span class="n">ex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertThrows</span><span class="p">(</span><span class="n">WebApplicationException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">                </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">rest</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/some/error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>

<span class="w">        </span><span class="c1">// exception hidden, only generic error code</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getResponse</span><span class="p">().</span><span class="na">readEntity</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">                </span><span class="p">.</span><span class="na">startsWith</span><span class="p">(</span><span class="s">&quot;{\&quot;code\&quot;:500,\&quot;message\&quot;:\&quot;There was an error processing your request. It has been logged&quot;</span><span class="p">));</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Without dropwizard exception mapper, we can verify exact exception:</p>
<div class="highlight"><pre><span></span><code><span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@StubRest</span><span class="p">(</span><span class="n">disableDropwizardExceptionMappers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="w">    </span><span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>

<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">ProcessingException</span><span class="w"> </span><span class="n">ex</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertThrows</span><span class="p">(</span><span class="n">ProcessingException</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">                </span><span class="p">()</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">rest</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/error&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">));</span>
<span class="w">        </span><span class="c1">// exception available</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">ex</span><span class="p">.</span><span class="na">getCause</span><span class="p">()</span><span class="w"> </span><span class="k">instanceof</span><span class="w"> </span><span class="n">IllegalStateException</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>It might be useful to disable application extensions also with <code>disableAllJerseyExtensions</code>:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@StubRest</span><span class="p">(</span><span class="n">disableDropwizardExceptionMappers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span>
<span class="w">          </span><span class="n">disableAllJerseyExtensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
</code></pre></div>
<p>This way raw resource would be called without any additional logic.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Only extensions, managed by guicey could be disabled: extensions directly registered
in dropwizard would remain.</p>
</div>
<p>Also, you can select exact extensions to use (e.g., to test it):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@StubRest</span><span class="p">(</span><span class="n">jerseyExtensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CustomExceptionMapper</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
</code></pre></div>
<p>Or disable only some extensions (for example, disabling extension implementing security):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@StubRest</span><span class="p">(</span><span class="n">disableJerseyExtensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">CustomSecurityFilter</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
</code></pre></div>
<h5 id="debug">Debug<a class="headerlink" href="#debug" title="Permanent link">&para;</a></h5>
<p>Use <strong>debug</strong> output to see what extensions were actually included and what disabled:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(..,</span><span class="w"> </span><span class="n">debug</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@StubRest</span><span class="p">(</span><span class="n">disableDropwizardExceptionMappers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span>
<span class="w">            </span><span class="n">disableResources</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Resource2</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">            </span><span class="n">disableJerseyExtensions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RestFilter2</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>REST stub (@StubRest) started on DebugReportTest$Test1:

    Jersey test container factory: org.glassfish.jersey.test.inmemory.InMemoryTestContainerFactory
    Dropwizard exception mappers: DISABLED

    2 resources (disabled 1):
        ErrorResource                (r.v.d.g.t.j.s.r.support)  
        Resource1                    (r.v.d.g.t.j.s.r.support)  

    2 jersey extensions (disabled 1):
        RestExceptionMapper          (r.v.d.g.t.j.s.r.support)  
        RestFilter1                  (r.v.d.g.t.j.s.r.support)  

    Use .printJerseyConfig() report to see ALL registered jersey extensions (including dropwizard)
</code></pre></div>
<h5 id="requests-logging">Requests logging<a class="headerlink" href="#requests-logging" title="Permanent link">&para;</a></h5>
<p>By default, rest client would log requests and responses:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGuiceyApp</span><span class="p">(...)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@StubRest</span>
<span class="w">    </span><span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rest</span><span class="p">.</span><span class="na">get</span><span class="p">(</span><span class="s">&quot;/foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="s">&quot;something&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">res</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>[Client action]---------------------------------------------{
1 * Sending client request on thread main
1 &gt; GET http://localhost:0/foo

}----------------------------------------------------------


[Client action]---------------------------------------------{
1 * Client response received on thread main
1 &lt; 200
1 &lt; Content-Length: 3
1 &lt; Content-Type: application/json
something

}----------------------------------------------------------
</code></pre></div>
<p>Logging could be disabled with <code>logRequests</code> option: <code>@StubRest(logRequests = false)</code></p>
<h5 id="container">Container<a class="headerlink" href="#container" title="Permanent link">&para;</a></h5>
<p>By default, <a href="https://eclipse-ee4j.github.io/jersey.github.io/documentation/latest/test-framework.html#d0e18552">InMemoryTestContainerFactory</a>
used.</p>
<div class="highlight"><pre><span></span><code>In-Memory container is not a real container. It starts Jersey application and 
directly calls internal APIs to handle request created by client provided by 
test framework. There is no network communication involved. This containers 
does not support servlet and other container dependent features, but it is a 
perfect choice for simple unit tests.
</code></pre></div>
<p>If it is not enough (in-memory container does not support all functions), then
use <code>GrizzlyTestContainerFactory</code></p>
<div class="highlight"><pre><span></span><code>The GrizzlyTestContainerFactory creates a container that can run as a light-weight, 
plain HTTP container. Almost all Jersey tests are using Grizzly HTTP test container 
factory.
</code></pre></div>
<p>To activate grizzly container add dependency (version managed by dropwizard BOM):</p>
<div class="highlight"><pre><span></span><code><span class="n">testImplementation</span><span class="w"> </span><span class="s1">&#39;org.glassfish.jersey.test-framework.providers:jersey-test-framework-provider-grizzly2&#39;</span>
</code></pre></div>
<p>By default, <code>@StubRest</code> would use grizzly, if it's available on classpath or in-memory.
If you need to force any container type use:</p>
<div class="highlight"><pre><span></span><code><span class="c1">// use in-memory container, even if grizly available in classpath</span>
<span class="c1">// (use to force more lightweight container, even if some tests require grizzly)</span>
<span class="nd">@StubRest</span><span class="p">(</span><span class="n">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestContainerPolicy</span><span class="p">.</span><span class="na">IN_MEMORY</span><span class="p">)</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1">// throw error if grizzly container not available in classpath</span>
<span class="c1">// (use to avoid accidental in-memory use)</span>
<span class="nd">@StubRest</span><span class="p">(</span><span class="n">container</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">TestContainerPolicy</span><span class="p">.</span><span class="na">GRIZZLY</span><span class="p">)</span>
</code></pre></div>
<h5 id="rest-client">Rest client<a class="headerlink" href="#rest-client" title="Permanent link">&para;</a></h5>
<p><code>RestClient</code> is almost the same as <code>ClientSupport</code>, available for guicey extensions.
It is just limited only for rest (and so simpler to use).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Just in case: <code>ClientSupport</code> would not work with <code>@StubRest</code>    </p>
</div>
<p>Client provides base methods with response mapping:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@StubRest</span>
<span class="n">RestClient</span><span class="w"> </span><span class="n">rest</span><span class="p">;</span>
</code></pre></div>
<ul>
<li><code>rest.get(path, Class)</code></li>
<li><code>rest.post(path, Object/Entity, Class)</code></li>
<li><code>rest.put(path, Object/Entity, Class)</code></li>
<li><code>rest.delete(path, Class)</code></li>
</ul>
<p>To not overload default methods with parameters, additional data could be set with defaults:</p>
<ul>
<li><code>rest.defaultHeader(String, String)</code></li>
<li><code>rest.defaultQueryParam(String, String)</code></li>
<li><code>rest.defaultAccept(String...)</code></li>
<li><code>rest.defaultOk(Integer...)</code></li>
</ul>
<p><code>defaultOk</code> used for void responses (response class == null) to check correct response 
status (default 200 (OK) and 204 (NO_CONTENT)).</p>
<p>So if we need to perform a post request with query param and custom header:</p>
<div class="highlight"><pre><span></span><code><span class="n">rest</span><span class="p">.</span><span class="na">defaultHeader</span><span class="p">(</span><span class="s">&quot;Secret&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;unreadable&quot;</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">defaultQueryParam</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bar&quot;</span><span class="p">);</span>
<span class="n">OtherModel</span><span class="w"> </span><span class="n">res</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rest</span><span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="s">&quot;/somehere&quot;</span><span class="p">,</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SomeModel</span><span class="p">(),</span><span class="w"> </span><span class="n">OtherModel</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Multipart support is enabled automatically when dropwizard-forms available in classpath</p>
<div class="highlight"><pre><span></span><code><span class="n">FormDataMultiPart</span><span class="w"> </span><span class="n">multiPart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FormDataMultiPart</span><span class="p">();</span>
<span class="n">multiPart</span><span class="p">.</span><span class="na">setMediaType</span><span class="p">(</span><span class="n">MediaType</span><span class="p">.</span><span class="na">MULTIPART_FORM_DATA_TYPE</span><span class="p">);</span>

<span class="n">FileDataBodyPart</span><span class="w"> </span><span class="n">fileDataBodyPart</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FileDataBodyPart</span><span class="p">(</span><span class="s">&quot;file&quot;</span><span class="p">,</span>
<span class="w">        </span><span class="n">file</span><span class="p">.</span><span class="na">toFile</span><span class="p">(),</span>
<span class="w">        </span><span class="n">MediaType</span><span class="p">.</span><span class="na">APPLICATION_OCTET_STREAM_TYPE</span><span class="p">);</span>
<span class="n">multiPart</span><span class="p">.</span><span class="na">bodyPart</span><span class="p">(</span><span class="n">fileDataBodyPart</span><span class="p">);</span>

<span class="n">rest</span><span class="p">.</span><span class="na">post</span><span class="p">(</span><span class="n">path</span><span class="p">,</span><span class="w"> </span><span class="n">Entity</span><span class="p">.</span><span class="na">entity</span><span class="p">(</span><span class="n">multiPart</span><span class="p">,</span><span class="w"> </span><span class="n">multiPart</span><span class="p">.</span><span class="na">getMediaType</span><span class="p">()),</span><span class="w"> </span><span class="n">Something</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div>
</div>
<p>To clear defaults: </p>
<div class="highlight"><pre><span></span><code><span class="n">rest</span><span class="p">.</span><span class="na">reset</span><span class="p">()</span><span class="w"> </span>
</code></pre></div>
<p>Might be a part of call chain:</p>
<div class="highlight"><pre><span></span><code><span class="n">rest</span><span class="p">.</span><span class="na">reset</span><span class="p">().</span><span class="na">post</span><span class="p">(...)</span><span class="w"> </span>
</code></pre></div>
<p>When test needs to verify cookies, response headers, etc. use <code>.request(path)</code>:</p>
<div class="highlight"><pre><span></span><code><span class="n">Response</span><span class="w"> </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rest</span><span class="p">.</span><span class="na">request</span><span class="p">(</span><span class="n">path</span><span class="p">).</span><span class="na">get</span><span class="p">()</span><span class="w"> </span><span class="c1">// .post(), .put(), .delete();</span>
</code></pre></div>
<p>All defaults are also applied in this case.</p>
<p>To avoid applying configured defaults, raw <code>rest.target(path)...</code> could be used.</p>
<h4 id="testing-logs">Testing logs<a class="headerlink" href="#testing-logs" title="Permanent link">&para;</a></h4>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Logs testing works only with logback!</p>
</div>
<p><code>@RecordLogs</code> extension could record log messages for one or multiple classes:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@TestGucieyApp</span><span class="p">(...)</span>
<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">Test</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@RecordLogs</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Service</span><span class="p">.</span><span class="na">class</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">DEBUG</span><span class="p">)</span>
<span class="w">    </span><span class="n">RecordedLogs</span><span class="w"> </span><span class="n">logs</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Inject</span>
<span class="w">    </span><span class="n">Service</span><span class="w"> </span><span class="n">service</span><span class="p">;</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="c1">// here some actions with service, involving logging</span>
<span class="w">        </span><span class="n">service</span><span class="p">.</span><span class="na">doSomething</span><span class="p">();</span>

<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">logs</span><span class="p">.</span><span class="na">count</span><span class="p">());</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertTrue</span><span class="p">(</span><span class="n">logs</span><span class="p">.</span><span class="na">has</span><span class="p">(</span><span class="n">Level</span><span class="p">.</span><span class="na">DEBUG</span><span class="p">));</span>
<span class="w">        </span><span class="n">Assertions</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="n">Arrays</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="s">&quot;message 1&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;message 2&quot;</span><span class="p">),</span><span class="w"> </span>
<span class="w">                </span><span class="n">logs</span><span class="p">.</span><span class="na">messages</span><span class="p">());</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
<p>Logs could be collected for any custom logger name or entire package:</p>
<div class="highlight"><pre><span></span><code><span class="nd">@RecordLogs</span><span class="p">(</span><span class="n">loggers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;ru.vyarus.dropwizard.guice.test&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">level</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Level</span><span class="p">.</span><span class="na">TRACE</span><span class="p">)</span>
<span class="n">RecordedLogs</span><span class="w"> </span><span class="n">logs</span><span class="p">;</span>
</code></pre></div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>To collect logs, logger level must be set to the required level and so these logs would 
also appear in console output. 
This allows using log recorder as a simple way to enable required logs for tests.</p>
</div>
<p>Dropwizard resets logging two times during startup, but the extension also configures required
loggers multiple times. In most cases, all required logged messages should be intercepted.</p>
<p>To avoid tons of selection methods with different parameters, all selection methods
return sub-selector object for further selections. 
For example, to select messages by level and logger:</p>
<div class="highlight"><pre><span></span><code><span class="n">logs</span><span class="p">.</span><span class="na">logger</span><span class="p">(</span><span class="n">SomeClass</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">level</span><span class="p">(</span><span class="n">Level</span><span class="p">.</span><span class="na">DEBUG</span><span class="p">).</span><span class="na">messages</span><span class="p">().</span>
</code></pre></div>
<p>Also, original event objects are available: <code>.events()</code>.</p>
<h2 id="internal">Internal<a class="headerlink" href="#internal" title="Permanent link">&para;</a></h2>
<h3 id="beforeinit-event">BeforeInit event<a class="headerlink" href="#beforeinit-event" title="Permanent link">&para;</a></h3>
<p>Added <code>BeforeInitEvent</code> - ("meta" event) the first point where <code>Bootstrap</code> reference is available
(<code>GuiceBundle</code> initialization started), but guicey actually did not start any actions, except
hooks processing.</p>
<p>Example usage:</p>
<div class="highlight"><pre><span></span><code><span class="n">GuiceBundle</span><span class="p">.</span><span class="na">builder</span><span class="p">()</span>
<span class="w">    </span><span class="p">.</span><span class="na">listen</span><span class="p">(</span><span class="k">new</span><span class="w"> </span><span class="n">GuiceyLifecycleAdapter</span><span class="p">(){</span>
<span class="w">        </span><span class="nd">@Override</span>
<span class="w">        </span><span class="kd">protected</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">beforeInit</span><span class="p">(</span><span class="kd">final</span><span class="w"> </span><span class="n">BeforeInitEvent</span><span class="w"> </span><span class="n">event</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
<span class="w">    </span><span class="p">})</span>
</code></pre></div>
<p>Event used by the new startup time report (to modify <code>Bootstrap</code> object for execution 
time tracking).</p>
<h3 id="web-installers-marker">Web installers marker<a class="headerlink" href="#web-installers-marker" title="Permanent link">&para;</a></h3>
<p>Added a new marker interface <code>WebInstaller</code>. It must be applied for all
web (jetty) and jersey related installers.</p>
<p>Marker used to mark extensions as web extensions and be able to disable them
all at once (for example):</p>
<div class="highlight"><pre><span></span><code><span class="nd">@EnableHook</span>
<span class="kd">static</span><span class="w"> </span><span class="n">GuiceyConfigurationHook</span><span class="w"> </span><span class="n">hook</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">builder</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">builder</span><span class="p">.</span><span class="na">disable</span><span class="p">(</span><span class="n">webExtension</span><span class="p">());</span>
</code></pre></div>
<p>This is used in the new rest stubs to disable web extensions (not started with the jersey test 
support to avoid confusing console output).</p>
<h2 id="migration-guide">Migration guide<a class="headerlink" href="#migration-guide" title="Permanent link">&para;</a></h2>
<ul>
<li>If guicey shared state was used, then you'll have to update places accessing stored objects:
  before it was recommended to use bundle name as a key, now stored object class must be used
  (initial approach was not very easy to use (even confusing) now access is type-safe)</li>
<li>Guicey now analyzes bindings exposed from private guice modules to detect extensions.
  Also, disabling extension, declared in private module would lead to private binding remove.<br />
  If any problems appear, old behavior could be restored with:
  <code>.option(GuiceyOptions.AnalyzePrivateGuiceModules, false)</code></li>
<li>If junit 5 used for tests, pay attention to new features:</li>
<li>Configuration modifiers (could be more useful than the configuration overrides mechanism)</li>
<li><code>GuiceyEnvironmentSetup</code> objects now have direct access to junit context and test lifecycle events
    and so could completely replace some junit extensions (where guicey integration is required)</li>
<li>New field-based extensions:
        * <code>@StubBean</code> - replacing guice beans with custom stubs (without additional modules declaration)
        * <code>@MockBean</code> - replacing guice beans with Mockito mocks
        * <code>@SpyBean</code> - replacing guice beans with Mockito spies
        * <code>@TrackBean</code> - simpler alternative to Mockito spies to track guice beans methods calls
        * <code>@StubRest</code> - lightweight rest services testing (without starting web)
        * <code>@RecordLogs</code> - test logs </li>
</ul>









  




                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2014-2025 Vyacheslav Rusakov
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/xvik" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.5.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tracking", "navigation.top"], "search": "../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": {"provider": "mike"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.1e8ae164.min.js"></script>
      
    
  </body>
</html>